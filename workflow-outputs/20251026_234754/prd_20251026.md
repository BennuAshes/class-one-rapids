{"type":"system","subtype":"init","cwd":"/mnt/c/dev/class-one-rapids","session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","tools":["Task","Bash","Glob","Grep","ExitPlanMode","Read","Edit","Write","NotebookEdit","WebFetch","TodoWrite","WebSearch","BashOutput","KillShell","Skill","SlashCommand"],"mcp_servers":[],"model":"claude-sonnet-4-5-20250929","permissionMode":"default","slash_commands":["add-docs","prd","next-feature","next-feature-full-flow","fix-tests","expand-feature","execute-task","design","brainstorm","reflect","reflect-convo","reflect-bug","refactor","research","research-technical","tasks","compact","context","cost","init","output-style:new","pr-comments","release-notes","todos","review","security-review"],"apiKeySource":"none","claude_code_version":"2.0.27","output_style":"default","agents":["general-purpose","statusline-setup","output-style-setup","Explore"],"skills":[],"plugins":[],"uuid":"6c35b14d-6e37-4e41-a001-da31dd3642f4"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018jbV1twUsMkfxXJD6DXfz6","type":"message","role":"assistant","content":[{"type":"text","text":"I'll generate a comprehensive PRD for the Salvage & Tinkering System with Progressive Automation. Let me first read the PRD template to ensure I follow the correct format."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":20397,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20397,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"cdb33604-c37b-4477-9e3a-636c3a0fbf2a"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_018jbV1twUsMkfxXJD6DXfz6","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01J6NoWgoFo1FY8b89E8sPqc","name":"Read","input":{"file_path":"/mnt/c/dev/class-one-rapids/.claude/commands/prd.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":20397,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":20397,"ephemeral_1h_input_tokens":0},"output_tokens":114,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"e772a4cf-1e8d-45fb-a2c2-dd74ae989202"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01J6NoWgoFo1FY8b89E8sPqc","type":"tool_result","content":"     1→---\n     2→description: \"Generate a comprehensive Product Requirements Document from feature description\"\n     3→argument-hint: \"<feature-description>\"\n     4→allowed-tools: \"Write, Read, Edit, Bash(date:*), Grep, Glob\"\n     5→---\n     6→\n     7→# PRD Generator\n     8→\n     9→Generate a lean, actionable Product Requirements Document for: **$ARGUMENTS**\n    10→\n    11→## Analysis Phase\n    12→\n    13→First, analyze the feature description to extract (following @docs/guides/lean-task-generation-guide.md principles):\n    14→1. **Core Problem**: What user problem does this solve?\n    15→2. **Target Users**: Who will benefit from this feature?\n    16→3. **Business Value**: Why is this worth building?\n    17→4. **Technical Scope**: What systems/components are involved?\n    18→5. **Success Indicators**: How will we know it's successful?\n    19→\n    20→## PRD Generation Requirements\n    21→\n    22→Create a comprehensive PRD following these specifications:\n    23→\n    24→### Document Structure\n    25→Generate a markdown PRD with these sections in order:\n    26→\n    27→#### 1. Header & Metadata\n    28→- Document title with feature name\n    29→- Version control table (start at v1.0)\n    30→- Author, date, status\n    31→- Executive summary (2-3 sentences)\n    32→\n    33→#### 2. Problem & Opportunity\n    34→- **Problem Statement**: Clear description with evidence\n    35→- **User Impact**: Who's affected and how often\n    36→- **Business Impact**: Cost of not solving\n    37→- **Evidence**: Include hypothetical but realistic metrics\n    38→\n    39→#### 3. Solution Overview\n    40→- **Approach**: High-level solution description\n    41→- **Value Proposition**: Why users will care\n    42→- **Key Differentiators**: What makes this unique\n    43→\n    44→#### 4. Success Metrics\n    45→Format as a table with:\n    46→| Metric | Current | Target | Timeline | Type |\n    47→- Include 2-3 primary metrics (business impact)\n    48→- Include 2-3 secondary metrics (user engagement)\n    49→- Include 1-2 counter-metrics (watch for negative impact)\n    50→\n    51→#### 5. User Stories & Requirements\n    52→For each major capability:\n    53→```\n    54→**Story: [Title]**\n    55→As a [user type]\n    56→I want to [action]\n    57→So that I can [benefit]\n    58→\n    59→**Acceptance Criteria:**\n    60→- [ ] Given [context], when [action], then [outcome]\n    61→- [ ] [Additional criteria using Given/When/Then or rules]\n    62→```\n    63→\n    64→#### 6. Functional Requirements\n    65→Organize by feature area:\n    66→- **[Feature Category]**\n    67→  - Requirement 1: [Specific, measurable description]\n    68→  - Requirement 2: [Specific, measurable description]\n    69→\n    70→#### 7. Non-Functional Requirements\n    71→- **Performance**: [Specific benchmarks, e.g., <2s load time, that are relevant to the technology used]\n    72→- **Security**: [Authentication, data protection requirements]\n    73→- **Accessibility**: [WCAG standards compliance]\n    74→- **Scalability**: [User/data volume requirements]\n    75→- **Browser/Device Support**: [Specific requirements]\n    76→\n    77→#### 8. Scope Definition\n    78→Following @docs/guides/lean-task-generation-guide.md - focus on deliverable features, not infrastructure:\n    79→\n    80→**MVP (Must Have):**\n    81→- P0: [Critical user-visible feature]\n    82→- P0: [Critical user-visible feature]\n    83→\n    84→**Nice to Have:**\n    85→- P1: [Important but not critical]\n    86→- P2: [Future enhancement]\n    87→\n    88→**Out of Scope:**\n    89→- [Explicitly excluded feature]\n    90→- [Future iteration item]\n    91→\n    92→#### 9. Dependencies & Risks\n    93→| Type | Description | Owner | Mitigation | Status |\n    94→Include 2-3 realistic dependencies/risks\n    95→\n    96→#### 10. Timeline & Milestones\n    97→- Discovery & Design: [X weeks]\n    98→- Development: [X weeks]\n    99→- Testing & QA: [X weeks]\n   100→- Launch: [Target date]\n   101→\n   102→Total: [X-X weeks]\n   103→\n   104→#### 11. Open Questions\n   105→- [ ] [Question needing resolution]\n   106→- [ ] [Decision to be made]\n   107→\n   108→#### 12. Appendix\n   109→- Glossary of terms\n   110→- References and links\n   111→- Related documents\n   112→\n   113→### Quality Requirements\n   114→\n   115→The PRD must be:\n   116→1. **Specific**: No vague terms like \"easy\" or \"fast\" - use measurable criteria\n   117→2. **User-Focused**: Write from user perspective, not system perspective\n   118→3. **Measurable**: Every requirement should be testable\n   119→4. **Realistic**: Timeline and scope should be achievable\n   120→5. **Complete**: Address all aspects including edge cases and error states\n   121→\n   122→### Format Guidelines\n   123→- Use tables for structured data\n   124→- Use checkboxes for criteria and questions\n   125→- Use priority labels (P0/P1/P2) for features\n   126→- Include realistic but hypothetical metrics\n   127→- Keep descriptions concise (1-2 sentences max)\n   128→\n   129→### Example Quality Markers\n   130→✅ GOOD: \"Users can reset password in <3 clicks with email confirmation within 2 minutes\"\n   131→❌ BAD: \"Easy password reset functionality\"\n   132→\n   133→✅ GOOD: \"Page loads in <2 seconds for 95% of users on 4G connections\"\n   134→❌ BAD: \"Fast page loading\"\n   135→\n   136→## Output\n   137→\n   138→Generate the complete PRD and save to:\n   139→- Filename: `prd_[feature_name_snake_case]_[YYYYMMDD].md`\n   140→- Location: Same directory as the feature description file\n   141→- Include generation timestamp at bottom\n   142→\n   143→The PRD should be immediately actionable for a development team while remaining flexible for iteration based on feedback and learning.\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"d8ceb57a-a1d3-4f75-ad38-c7b54d483716"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01GzqJkPaheqJpEN6SH8qmZP","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me check if there's a lean task generation guide to ensure I follow those principles:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":1899,"cache_read_input_tokens":20397,"cache_creation":{"ephemeral_5m_input_tokens":1899,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"ded270bd-e1a4-43d1-8adc-9d522f27bfd0"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01GzqJkPaheqJpEN6SH8qmZP","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01KwchHtXM5wvtpeyrvjZD8C","name":"Read","input":{"file_path":"/mnt/c/dev/class-one-rapids/docs/guides/lean-task-generation-guide.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":1899,"cache_read_input_tokens":20397,"cache_creation":{"ephemeral_5m_input_tokens":1899,"ephemeral_1h_input_tokens":0},"output_tokens":99,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"2277e5f1-0e97-4fff-a647-597127ed1a8d"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01KwchHtXM5wvtpeyrvjZD8C","type":"tool_result","content":"     1→# Lean Task Generation Guide\n     2→\n     3→## Purpose\n     4→This guide defines how to generate implementation tasks that follow lean development principles. Every task must deliver working functionality, with infrastructure emerging naturally from feature needs.\n     5→\n     6→## Core Principles\n     7→\n     8→### 1. No Infrastructure-Only Tasks\n     9→**❌ BAD**: \"Set up project folder structure\"\n    10→**✅ GOOD**: \"Implement tap-to-damage feature (creating services/DamageCalculator.ts as needed)\"\n    11→\n    12→### 2. Start with Simplest Working Feature\n    13→The first task must deliver user-visible functionality using existing files where possible.\n    14→\n    15→**❌ BAD First Task**:\n    16→```\n    17→Task 1.1: Initialize Project Repository\n    18→- Create folder structure\n    19→- Install dependencies\n    20→- Configure tools\n    21→```\n    22→\n    23→**✅ GOOD First Task**:\n    24→```\n    25→Task 1.1: Basic Tap-to-Damage with TDD\n    26→- Write failing test in App.test.tsx\n    27→- Modify existing App.tsx to pass test\n    28→- User can tap enemy to deal damage\n    29→```\n    30→\n    31→### 3. Just-In-Time Everything\n    32→- **Dependencies**: Install only when first used in a feature\n    33→- **Folders**: Create only when adding first file\n    34→- **Configuration**: Setup only when feature needs it\n    35→- **Abstractions**: Extract only when duplication appears\n    36→\n    37→### 4. Every Task Delivers Functionality\n    38→Each task must:\n    39→1. Start with a failing test for user-visible behavior\n    40→2. Implement minimal code to pass the test\n    41→3. End with working, shippable functionality\n    42→4. Document what was created as side effects\n    43→\n    44→### 5. Progressive Enhancement\n    45→Build complexity incrementally:\n    46→- Task 1: Simplest possible version (tap reduces health)\n    47→- Task 2: Add one layer (damage varies)\n    48→- Task 3: Add another layer (combo system)\n    49→\n    50→## Task Generation Template\n    51→\n    52→```markdown\n    53→### Task [#]: [User-Visible Feature Name]\n    54→**ROLE**: You are a [role] implementing [what user can do]\n    55→\n    56→**CONTEXT**: [Current state and why this feature is next]\n    57→\n    58→**OBJECTIVE**: [Specific user-facing functionality to deliver]\n    59→\n    60→**TDD IMPLEMENTATION**:\n    61→#### Step 1: Write Failing Test\n    62→```[language]\n    63→// Test for user-visible behavior\n    64→test('[what user sees/does]', () => {\n    65→  // Arrange\n    66→  // Act\n    67→  // Assert user-visible outcome\n    68→});\n    69→```\n    70→\n    71→#### Step 2: Minimal Implementation\n    72→```[language]\n    73→// Simplest code to make test pass\n    74→// Use existing files where possible\n    75→```\n    76→\n    77→#### Step 3: Refactor (if needed)\n    78→- Clean up while keeping tests green\n    79→\n    80→**FILES TO CREATE** (only if needed):\n    81→- [Only list files that don't exist yet]\n    82→- [Create folders only with first file]\n    83→\n    84→**DEPENDENCIES TO ADD** (only if needed):\n    85→- [Package] - for [specific feature need]\n    86→\n    87→**ACCEPTANCE CRITERIA**:\n    88→- [ ] User can [do something]\n    89→- [ ] [Visible outcome] happens\n    90→- [ ] Tests pass\n    91→- [ ] Feature works end-to-end\n    92→\n    93→**DELIVERABLE**: [What user can now do that they couldn't before]\n    94→```\n    95→\n    96→## Validation Checklist\n    97→\n    98→Before accepting a generated task list, verify:\n    99→\n   100→### Task Quality\n   101→- [ ] First task delivers working functionality?\n   102→- [ ] Every task has user-visible outcome?\n   103→- [ ] No pure setup/infrastructure tasks?\n   104→- [ ] Each task includes TDD cycle?\n   105→\n   106→### Lean Principles\n   107→- [ ] Dependencies installed only when used?\n   108→- [ ] Folders created only with files?\n   109→- [ ] Using existing files where possible?\n   110→- [ ] Complexity added incrementally?\n   111→\n   112→### Task Count\n   113→- [ ] Minimized number of tasks?\n   114→- [ ] Combined related work where sensible?\n   115→- [ ] No artificial task splitting?\n   116→\n   117→## Examples of Transformation\n   118→\n   119→### Before (Infrastructure-Heavy):\n   120→```\n   121→Phase 1: Setup\n   122→- Task 1.1: Create folder structure\n   123→- Task 1.2: Install all dependencies\n   124→- Task 1.3: Configure testing\n   125→\n   126→Phase 2: Implementation\n   127→- Task 2.1: Create services\n   128→- Task 2.2: Create components\n   129→- Task 2.3: Wire everything together\n   130→```\n   131→\n   132→### After (Lean/Functional):\n   133→```\n   134→Phase 1: Working Features\n   135→- Task 1.1: Tap enemy to deal damage (modify App.tsx)\n   136→- Task 1.2: Add damage numbers (install reanimated when needed)\n   137→- Task 1.3: Add health bar (create first component)\n   138→```\n   139→\n   140→## Anti-Patterns to Avoid\n   141→\n   142→### 1. Premature Structure\n   143→❌ Creating folders before files\n   144→❌ Setting up \"proper architecture\" upfront\n   145→✅ Let structure emerge from needs\n   146→\n   147→### 2. Big Bang Dependencies\n   148→❌ Installing all packages in task 1\n   149→❌ \"We'll need these later\"\n   150→✅ Install each package with feature that uses it\n   151→\n   152→### 3. Setup Theater\n   153→❌ Tasks that only move files around\n   154→❌ Tasks that only install things\n   155→✅ Every task changes user experience\n   156→\n   157→### 4. Waterfall Phases\n   158→❌ Phase 1: All setup, Phase 2: All implementation\n   159→✅ Each phase delivers working features\n   160→\n   161→## Task Generation Process\n   162→\n   163→1. **Identify Simplest Valuable Feature**\n   164→   - What's the minimum user can interact with?\n   165→   - Can it be done in existing files?\n   166→\n   167→2. **Write First Task**\n   168→   - Test for user behavior\n   169→   - Minimal implementation\n   170→   - Note any files/deps created\n   171→\n   172→3. **Identify Next Enhancement**\n   173→   - What makes feature slightly better?\n   174→   - Build on existing code\n   175→\n   176→4. **Repeat Until Complete**\n   177→   - Each task adds functionality\n   178→   - Structure emerges naturally\n   179→   - Dependencies added as needed\n   180→\n   181→## Metrics for Success\n   182→\n   183→Good task lists have:\n   184→- **Fewer tasks** (15 vs 42)\n   185→- **Faster time to first feature** (Task 1 vs Task 5)\n   186→- **No empty folders/files**\n   187→- **Every task demo-able**\n   188→- **Natural architecture emergence**\n   189→\n   190→## Key Phrases for Task Generation\n   191→\n   192→Use these phrases in prompts:\n   193→- \"Deliver working functionality in every task\"\n   194→- \"Start with simplest user-visible feature\"\n   195→- \"Create files only when implementing features\"\n   196→- \"Install dependencies just-in-time\"\n   197→- \"No infrastructure-only tasks\"\n   198→- \"Modify existing files where possible\"\n   199→- \"Every task must be demo-able\"\n   200→\n   201→## Applying to Different Project Types\n   202→\n   203→### Frontend/UI Projects\n   204→- First task: Simplest screen with interaction\n   205→- Add complexity: State, routing, API calls\n   206→\n   207→### API/Backend Projects\n   208→- First task: Single endpoint that works\n   209→- Add complexity: Validation, auth, database\n   210→\n   211→### CLI Tools\n   212→- First task: Simplest command that runs\n   213→- Add complexity: Options, config, output formats\n   214→\n   215→### Libraries\n   216→- First task: Core function that works\n   217→- Add complexity: Edge cases, utilities, types\n   218→\n   219→---\n   220→*This guide should be referenced whenever generating task lists from TDDs or PRDs*\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"83d9086c-a9b8-4cd1-9430-f73dfdf11e92"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_0147Bou5S6ewMu9WqJHYRm3q","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! Now I'll generate a comprehensive PRD following the template structure. Let me also check where the original feature spec is located to save the PRD in the same directory:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":2512,"cache_read_input_tokens":22296,"cache_creation":{"ephemeral_5m_input_tokens":2512,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"10106c58-9238-4b7d-a40d-acc6bc906e8a"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_0147Bou5S6ewMu9WqJHYRm3q","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01Bm1cQxNBMNBdr8jSNPkYbX","name":"Glob","input":{"pattern":"**/salvage*tinkering*.md"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":2512,"cache_read_input_tokens":22296,"cache_creation":{"ephemeral_5m_input_tokens":2512,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"d3ef9058-2b51-42f9-95b0-8414615a4f0f"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01Bm1cQxNBMNBdr8jSNPkYbX","type":"tool_result","content":"/mnt/c/dev/class-one-rapids/docs/specs/salvage-tinkering-system/salvage-tinkering-system.md\n/mnt/c/dev/class-one-rapids/docs/specs/salvage-tinkering-system/salvage-tinkering-progressive-automation.md"}]},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"dd676a8d-d127-4ca7-8ec6-191a81327acf"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_012Gj55jEyximTJWmG6E87hr","type":"message","role":"assistant","content":[{"type":"text","text":"Now I'll create a comprehensive PRD for the Salvage & Tinkering System with Progressive Automation:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":186,"cache_read_input_tokens":24808,"cache_creation":{"ephemeral_5m_input_tokens":186,"ephemeral_1h_input_tokens":0},"output_tokens":5,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"b4af6cc7-6cef-4648-8be8-5d280577888a"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_012Gj55jEyximTJWmG6E87hr","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01N29Jvt75pTZfdRnfj8wt4f","name":"Bash","input":{"command":"date +%Y%m%d","description":"Get current date for filename"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":186,"cache_read_input_tokens":24808,"cache_creation":{"ephemeral_5m_input_tokens":186,"ephemeral_1h_input_tokens":0},"output_tokens":105,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"9a145a00-23aa-418a-af4e-45c7e5ed4228"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01N29Jvt75pTZfdRnfj8wt4f","type":"tool_result","content":"20251026","is_error":false}]},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"344ddf4d-81c1-42d6-8a45-7f3c51cb3fca"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01BCkdRXhsKwVZLduNPTXF7E","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_014waYfHoKb6o1pXJVVYs7qz","name":"Write","input":{"file_path":"/mnt/c/dev/class-one-rapids/docs/specs/salvage-tinkering-system/prd_salvage_tinkering_progressive_automation_20251026.md","content":"# Product Requirements Document: Salvage & Tinkering System with Progressive Automation\n\n## Document Information\n\n| Version | Author | Date | Status |\n|---------|--------|------|--------|\n| v1.0 | Game Design Team | 2025-10-26 | Draft |\n\n### Executive Summary\n\nThe Salvage & Tinkering System introduces a progressively automated idle game mechanic where players manually salvage items for materials and upgrade equipment through tinkering. The system evolves from satisfying manual crafting (Levels 1-10) through strategic hybrid automation (Levels 11-25) to full optimization gameplay (Level 26+), creating a compelling engagement loop that rewards both active play and idle progression while maintaining player agency throughout.\n\n---\n\n## 1. Problem & Opportunity\n\n### Problem Statement\n\nMobile idle/incremental games face a fundamental tension: manual clicking provides satisfying feedback but becomes tedious, while premature automation removes player engagement. Current games either:\n- Force repetitive manual actions that feel like work (player fatigue at 20-30 min)\n- Introduce automation too early, removing the satisfaction of progress (50% drop-off when automation starts)\n- Create disconnected manual and auto systems that compete rather than complement\n\nPlayers need a crafting/progression system that naturally transitions from engaging manual gameplay to strategic automation without losing the core satisfaction loop.\n\n### User Impact\n\n**Who's Affected:**\n- **Primary**: 100% of players engaging with equipment progression (core game loop)\n- **Secondary**: Players seeking idle/passive progression (estimated 70% of player base)\n- **Frequency**: Multiple times per session, daily engagement\n\n**Current Experience:**\n- Equipment upgrades require manual material gathering (tedious after 50+ items)\n- No offline progression for crafting systems\n- Material management becomes overwhelming at scale (200+ items)\n- Players must choose between tedious clicking or no progression\n\n### Business Impact\n\n**Cost of Not Solving:**\n- **Retention**: Session lengths plateau at 15 minutes vs target 30+ minutes\n- **Monetization**: Limited premium upgrade paths without automation systems\n- **Engagement**: 40% of players abandon equipment system after Level 5\n- **Lifetime Value**: Players who engage with crafting have 3x higher LTV but only 30% currently do so\n\n**Opportunity:**\n- Idle/incremental mechanics increase daily active users by 40-60% in comparable games\n- Automation systems create clear monetization tiers (speed boosts, offline bonuses)\n- Progressive complexity naturally segments players by engagement level\n\n### Evidence\n\n**Hypothetical Metrics (Based on Similar Games):**\n- Average salvage session: 5.2 minutes (target: 15+ minutes)\n- Manual clicks per session: 47 (unsustainable beyond Level 10)\n- Equipment upgrade frequency: 2.1 per day (target: 8-12 per day with automation)\n- Material inventory turnover: 68% unused (indicates poor engagement loop)\n\n---\n\n## 2. Solution Overview\n\n### Approach\n\nA three-phase progression system that transforms the salvage and tinkering experience:\n\n**Phase 1: Manual Crafting Foundation (Levels 1-10)**\n- Direct click-to-salvage with satisfying visual/audio feedback\n- 100% success rate tinkering to build confidence\n- Simple material collection and equipment upgrade flow\n- First automation unlock at Level 10 as major milestone\n\n**Phase 2: Assisted Automation (Levels 11-25)**\n- Gradual automation unlocks through dual progression trees\n- Hybrid gameplay where manual actions provide bonuses (2x speed, critical success)\n- Strategic decision-making: automation priorities, resource allocation\n- Active play remains superior but automation provides baseline progress\n\n**Phase 3: Full Automation & Optimization (Level 26+)**\n- Complete automation with offline progression\n- High-level strategic decisions (prestige choices, forge cycles)\n- Manual \"god mode\" abilities for active players (1000x processing, legendary chances)\n- Optimization and big number satisfaction\n\n### Value Proposition\n\n**For Active Players:**\n- Satisfying manual gameplay that remains rewarding at all levels\n- Manual bonuses ensure clicking is always valuable (2x speed, 5x materials)\n- Strategic depth through automation management and prestige choices\n\n**For Idle Players:**\n- Gradual automation unlocks create clear progression goals\n- Offline progression after Level 26 enables daily check-in gameplay\n- Set-and-forget systems with periodic optimization opportunities\n\n**For All Players:**\n- Natural learning curve: master manual mechanics before automation\n- Each automation feels earned, not handed out\n- Continuous sense of advancement through 40+ levels\n\n### Key Differentiators\n\n1. **Earned Automation**: Each automation tier is a reward for progression, not a default feature\n2. **Maintained Agency**: Manual play always provides significant bonuses, never becomes obsolete\n3. **Hybrid Gameplay**: Seamless blend of active and idle mechanics in Phase 2\n4. **Progressive UI Evolution**: Interface complexity matches player mastery\n5. **No-Failure Learning**: Phase 1 eliminates frustration during tutorial period\n\n---\n\n## 3. Success Metrics\n\n| Metric | Current | Target | Timeline | Type |\n|--------|---------|--------|----------|------|\n| Average salvage session length | 5.2 min | 15+ min | 4 weeks post-launch | Primary |\n| Equipment system engagement rate | 30% | 70% | 8 weeks post-launch | Primary |\n| Daily active users (DAU) retention | Baseline | +40% | 12 weeks post-launch | Primary |\n| Average revenue per paying user (ARPPU) | Baseline | +50% | 12 weeks post-launch | Secondary |\n| Phase 2 completion rate (Level 25+) | N/A | 50% | 8 weeks post-launch | Secondary |\n| Daily sessions per user | Baseline | +2.5 sessions | 8 weeks post-launch | Secondary |\n| Average click rate in Phase 3 | N/A | >10 clicks/min | 12 weeks post-launch | Counter |\n| Manual action engagement drop-off | N/A | <30% | 12 weeks post-launch | Counter |\n\n**Counter-Metric Rationale**: Monitor that automation doesn't completely replace manual play. Target: 70%+ of Phase 3 players still perform manual actions weekly.\n\n---\n\n## 4. User Stories & Requirements\n\n### Epic 1: Manual Salvaging Foundation\n\n**Story 1.1: Basic Salvaging**\nAs a player\nI want to tap items in my inventory to salvage them\nSo that I can collect materials for equipment upgrades\n\n**Acceptance Criteria:**\n- [ ] Given I have items in inventory, when I tap an item, then a 0.5-second salvage animation plays\n- [ ] Given salvage completes, when animation ends, then materials appear with particle effects matching material rarity\n- [ ] Given materials appear, when 0.5 seconds pass, then materials auto-collect to material counter\n- [ ] Given manual collection, when I tap floating materials, then they immediately collect\n- [ ] Given successful salvage, when materials collect, then counter updates with popup number animation (+X)\n- [ ] Given inventory slot empties, when salvage completes, then slot is ready for next item immediately\n\n**Story 1.2: Material Discovery**\nAs a new player\nI want to see different visual feedback for different material types\nSo that I understand the value of what I'm collecting\n\n**Acceptance Criteria:**\n- [ ] Given common material drops, when salvaging, then blue particles emit\n- [ ] Given rare material drops, when salvaging, then purple particles emit with stronger glow\n- [ ] Given epic material drops, when salvaging, then gold particles emit with screen edge glow\n- [ ] Given legendary material drops, when salvaging, then rainbow particles emit with screen shake and unique sound\n- [ ] Given first discovery of material type, when collected, then brief tooltip shows \"[Material] discovered!\"\n\n**Story 1.3: Manual Tinkering**\nAs a player\nI want to use collected materials to upgrade my equipment\nSo that I can increase my power level\n\n**Acceptance Criteria:**\n- [ ] Given I have sufficient materials, when I tap equipment piece, then tinkering interface opens\n- [ ] Given tinkering interface open, when I tap \"Upgrade\" button, then 2-second channeling animation plays\n- [ ] Given channeling completes, when timer reaches 0, then equipment shows \"+1\" with success particles\n- [ ] Given successful upgrade, when animation completes, then power level increases visibly\n- [ ] Given insufficient materials, when I tap \"Upgrade\", then button is disabled with red tint and shows \"Need X more [material]\"\n- [ ] Given Phase 1 (Levels 1-10), when any upgrade occurs, then success rate is 100%\n\n### Epic 2: Early Automation Unlocks\n\n**Story 2.1: Batch Processing**\nAs a player progressing to Level 8\nI want to select multiple items for salvage\nSo that I can process materials more efficiently\n\n**Acceptance Criteria:**\n- [ ] Given Level 8 reached, when tutorial displays, then batch select feature is explained\n- [ ] Given batch mode available, when I shift-tap items, then items highlight with selection border\n- [ ] Given items selected, when I tap \"Salvage All Selected\" button, then items process sequentially at 2 items/second\n- [ ] Given batch salvaging, when processing, then progress bar shows X/Y items completed\n- [ ] Given batch complete, when all items processed, then summary shows total materials gained\n\n**Story 2.2: First Automation Assistant**\nAs a player reaching Level 10\nI want to unlock automated salvaging\nSo that I can progress while focusing on other gameplay\n\n**Acceptance Criteria:**\n- [ ] Given Level 10 reached, when level-up occurs, then major celebration animation plays\n- [ ] Given celebration complete, when dismissed, then \"Salvage Assistant Unlocked!\" modal appears\n- [ ] Given assistant unlocked, when activated, then assistant icon appears in UI\n- [ ] Given assistant active, when items in inventory, then assistant salvages 1 item every 3 seconds automatically\n- [ ] Given assistant running, when I manual-click items, then manual actions process immediately (don't wait for assistant cycle)\n- [ ] Given assistant working, when inventory empties, then assistant enters idle state with \"Waiting for items\" indicator\n\n### Epic 3: Hybrid Automation Phase\n\n**Story 3.1: Automation Progression Tree**\nAs a mid-level player (11-25)\nI want to upgrade my automation capabilities\nSo that I can increase my passive income while maintaining active bonuses\n\n**Acceptance Criteria:**\n- [ ] Given Level 11 reached, when accessing automation menu, then upgrade tree displays with locked/unlocked tiers\n- [ ] Given viewing tree, when I tap any node, then tooltip shows: level requirement, cost, effect description\n- [ ] Given sufficient resources, when I purchase upgrade, then confirmation modal shows before/after stats\n- [ ] Given upgrade purchased, when confirmed, then visual effect connects node to previous tier\n- [ ] Given upgrade active, when salvaging occurs, then new rate applies immediately\n- [ ] Upgrade progression: Level 11 (1/3s) → L13 (1/2s) → L15 (1/1s) → L18 (3/s) → L22 (10/s)\n\n**Story 3.2: Manual Click Bonuses**\nAs an active player in Phase 2\nI want manual actions to provide significant advantages\nSo that active play feels rewarding alongside automation\n\n**Acceptance Criteria:**\n- [ ] Given automation active, when I manual-click salvage, then item processes 2x faster than automation speed\n- [ ] Given 10 manual clicks within 5 seconds, when threshold reached, then \"COMBO!\" appears and next 10 automation cycles are 3x speed\n- [ ] Given manual salvage, when processing, then 5% chance for critical salvage (screen flash + \"CRITICAL!\" text)\n- [ ] Given critical salvage, when materials drop, then 5x materials are rewarded\n- [ ] Given manual tinkering, when upgrading equipment, then material cost is 50% of auto-tinkering cost\n- [ ] Given manual actions, when performed, then UI shows comparison: \"Manual: 2.0/sec | Auto: 1.0/sec\"\n\n**Story 3.3: Auto-Tinkering System**\nAs a player reaching Level 12\nI want equipment to upgrade automatically\nSo that I don't need to manually manage each upgrade\n\n**Acceptance Criteria:**\n- [ ] Given Level 12 reached, when unlocked, then \"Auto-Tinker\" toggle appears on equipment pieces\n- [ ] Given auto-tinker enabled, when sufficient materials available, then upgrade automatically initiates\n- [ ] Given auto-tinkering, when in progress, then circular progress bar fills over 2 seconds\n- [ ] Given multiple equipment pieces, when setting priority (Level 16), then materials distribute based on priority order (1-6)\n- [ ] Given priority set, when materials available, then highest priority unfulfilled item receives materials\n- [ ] Given Smart Tinkering unlocked (Level 20), when activated, then AI suggests optimal distribution with \"Accept\" button\n\n### Epic 4: Full Automation & Endgame\n\n**Story 4.1: Master Salvager System**\nAs a late-game player (Level 26+)\nI want full automation with offline progression\nSo that I can progress even when not actively playing\n\n**Acceptance Criteria:**\n- [ ] Given Level 26 reached, when Master Salvager unlocked, then automation processes up to 100 items/second\n- [ ] Given offline, when app closed, then system continues processing at 50% of active rate\n- [ ] Given offline for X hours, when returning, then summary modal shows: items processed, materials gained, time elapsed\n- [ ] Given queue capacity, when reached, then notification warns \"Queue full: 10,000 items\"\n- [ ] Given queue management, when full, then oldest common items auto-salvage to make room\n- [ ] Given offline gains, when exceeding 24 hours, then cap applies at 24 hours of progression (prevents exploit)\n\n**Story 4.2: Prestige Salvaging**\nAs an advanced player (Level 35+)\nI want meaningful choices that affect my salvaging strategy\nSo that I can optimize for different goals\n\n**Acceptance Criteria:**\n- [ ] Given 1000 items salvaged, when milestone reached, then prestige choice modal appears\n- [ ] Given prestige choice, when presented, then 3 random options appear from pool of 12 bonuses\n- [ ] Given viewing choices, when hovering, then detailed effect and duration display\n- [ ] Given choice selected, when confirmed, then bonus activates with timer in UI\n- [ ] Given bonus active, when timer expires, then visual effect fades and bonus deactivates\n- [ ] Bonus examples: +10% materials (1hr), Next 100 = guaranteed rare (no timer), 2x tinker speed (30min)\n\n**Story 4.3: God Mode Manual Actions**\nAs a max-level active player\nI want extremely powerful manual abilities\nSo that active play remains valuable at endgame\n\n**Acceptance Criteria:**\n- [ ] Given God Click unlocked (Level 40), when activated, then next click processes 1000 items instantly\n- [ ] Given God Click used, when activated, then 1-hour cooldown begins with timer display\n- [ ] Given manual salvage at endgame, when clicking, then 50% chance for legendary material upgrade\n- [ ] Given Master's Touch active, when manual tinkering, then can upgrade beyond normal max (+5 bonus levels)\n- [ ] Given manual actions in Phase 3, when performed, then special visual effects (golden glow) distinguish from automation\n\n### Epic 5: UI Evolution\n\n**Story 5.1: Phase-Appropriate Interface**\nAs a player progressing through phases\nI want the UI to match my current gameplay needs\nSo that I'm not overwhelmed early or under-informed late\n\n**Acceptance Criteria:**\n- [ ] Given Phase 1 (Levels 1-10), when viewing UI, then only inventory grid, material counters, and equipment slots visible\n- [ ] Given Phase 2 (Levels 11-25), when UI evolves, then automation controls, progress bars, and upgrade tree appear\n- [ ] Given Phase 3 (Levels 26+), when UI evolves, then command center view with statistics, efficiency metrics, and prestige options display\n- [ ] Given UI transition, when phase changes, then brief animated tutorial highlights new elements\n- [ ] Given any phase, when player taps \"?\" icon, then current phase tutorial can be replayed\n\n**Story 5.2: Streaming Number Satisfaction**\nAs an idle game player\nI want to see numbers increasing continuously\nSo that I feel progression happening\n\n**Acceptance Criteria:**\n- [ ] Given automation active (Phase 2+), when materials gained, then counter increments with smooth animation\n- [ ] Given high-speed automation (Phase 3), when processing >10 items/sec, then numbers stream upward continuously\n- [ ] Given power level, when increasing, then +X/hour rate displays next to total\n- [ ] Given Phase 3, when viewing dashboard, then efficiency percentage (0-100%) displays based on optimal performance\n- [ ] Given milestones, when reached (10k, 100k, 1M materials), then celebration animation triggers\n\n---\n\n## 5. Functional Requirements\n\n### Salvaging System\n\n- **FR-S1**: Tap-to-salvage responds within 50ms with tactile feedback (vibration on mobile)\n- **FR-S2**: Each item type has unique particle effect color and intensity matching rarity\n- **FR-S3**: Material collection auto-triggers after 0.5s or immediately on tap\n- **FR-S4**: Salvage animation duration scales: Common 0.5s, Rare 0.7s, Epic 0.9s, Legendary 1.2s\n- **FR-S5**: Material drops calculated using server-validated loot tables (prevent client manipulation)\n- **FR-S6**: Inventory supports minimum 100 slots (Phase 1) scaling to 10,000 slots (Phase 3)\n- **FR-S7**: Batch selection supports up to 50 items simultaneously\n- **FR-S8**: Queue system processes items in FIFO order unless priority rules apply\n\n### Tinkering System\n\n- **FR-T1**: Equipment upgrade cost follows formula: `baseCost * (1.15 ^ currentLevel)`\n- **FR-T2**: Manual tinkering applies 50% material cost discount in Phase 2+\n- **FR-T3**: Success rate is 100% for Levels 1-10, introduces failure chance (90% base) at Level 11+\n- **FR-T4**: Auto-tinkering processes one upgrade attempt every 2 seconds per equipment piece\n- **FR-T5**: Priority system (Level 16+) supports 1-6 ranking for 6 equipment slots\n- **FR-T6**: Smart Tinkering AI suggests distribution based on: current levels, material availability, cost efficiency\n- **FR-T7**: Equipment power level contributes to global player power using weighted sum\n\n### Automation System\n\n- **FR-A1**: Automation speeds: L10 (0.33/s) → L13 (0.5/s) → L15 (1/s) → L18 (3/s) → L22 (10/s) → L26 (100/s)\n- **FR-A2**: Manual click speed is always 2x current automation speed\n- **FR-A3**: Combo system requires 10 manual actions within 5-second window\n- **FR-A4**: Combo bonus applies 3x speed multiplier to next 10 automation cycles\n- **FR-A5**: Critical salvage has 5% base chance, increased by gear bonuses, provides 5x materials\n- **FR-A6**: Automation upgrade costs scale exponentially: `baseUpgradeCost * (1.5 ^ tier)`\n- **FR-A7**: Offline progression calculates at 50% of active automation speed\n- **FR-A8**: Offline progression caps at 24 hours of equivalent active time\n\n### Prestige System\n\n- **FR-P1**: Prestige triggers every 1000 items salvaged (counter persists across sessions)\n- **FR-P2**: Prestige choice pool contains 12 unique bonuses, 3 randomly selected each trigger\n- **FR-P3**: Bonus effects stack if same bonus selected multiple times (additive stacking)\n- **FR-P4**: Timed bonuses display remaining duration in MM:SS format\n- **FR-P5**: Count-based bonuses display remaining charges (e.g., \"Guaranteed Rare: 47/100\")\n- **FR-P6**: Prestige history viewable in statistics panel (last 10 choices)\n\n### God Mode Abilities\n\n- **FR-G1**: God Click processes 1000 items instantly with single tap, 1-hour cooldown\n- **FR-G2**: God Click cooldown persists across sessions, displays countdown timer\n- **FR-G3**: Perfect Salvage grants 50% chance for legendary material on manual salvage (Phase 3)\n- **FR-G4**: Master's Touch allows equipment to exceed normal max level by +5\n- **FR-G5**: Master's Touch upgrades have 75% success rate, failure consumes materials\n- **FR-G6**: God Mode visual effects include golden particle trails and screen border glow\n\n### UI & Feedback Systems\n\n- **FR-U1**: Phase 1 UI displays: 4x8 inventory grid, 3 material counters, 6 equipment slots\n- **FR-U2**: Phase 2 UI adds: automation control panel, upgrade tree (12 nodes), progress bars\n- **FR-U3**: Phase 3 UI adds: statistics dashboard, efficiency meter, prestige panel, streaming numbers\n- **FR-U4**: Material counters support up to 999,999,999 with K/M/B suffix formatting\n- **FR-U5**: Animations use device-appropriate frame rates (60 FPS target, 30 FPS minimum)\n- **FR-U6**: Sound effects have 3-tier system: UI clicks (quiet), salvage effects (medium), milestone celebrations (loud)\n- **FR-U7**: Haptic feedback intensity scales with action importance: tap (light), upgrade (medium), prestige (strong)\n\n---\n\n## 6. Non-Functional Requirements\n\n### Performance\n\n- **NFR-P1**: Salvage tap response time <50ms from touch to visual feedback\n- **NFR-P2**: Animation frame rate maintains ≥30 FPS on devices from 2020+ (iOS 13+, Android 10+)\n- **NFR-P3**: High-speed automation (100 items/sec) processes without UI stutter or dropped frames\n- **NFR-P4**: Material counter updates batch at 16ms intervals (60 Hz) even during rapid gains\n- **NFR-P5**: Offline progression calculation completes within 3 seconds of app resume\n- **NFR-P6**: Memory footprint remains under 150MB during normal gameplay\n- **NFR-P7**: Battery impact <5% per hour of active gameplay on standard devices\n\n### Data Integrity & Security\n\n- **NFR-S1**: Material drop rates validated server-side with signed loot table responses\n- **NFR-S2**: Automation speeds validated against server-side expected ranges (±10% tolerance for latency)\n- **NFR-S3**: Offline progression requires server timestamp validation to prevent clock manipulation\n- **NFR-S4**: Player save data encrypted at rest using AES-256\n- **NFR-S5**: Critical actions (prestige, God Click) require server confirmation before UI update\n- **NFR-S6**: Inventory state syncs to server every 30 seconds during active play\n- **NFR-S7**: Conflict resolution prioritizes server state if local/remote mismatch detected\n\n### Accessibility\n\n- **NFR-A1**: All tappable elements minimum 44x44pt touch targets (iOS HIG compliance)\n- **NFR-A2**: Color blindness support: particle effects include shape differentiation (stars, circles, diamonds)\n- **NFR-A3**: Screen reader support for all UI text and state changes (iOS VoiceOver, Android TalkBack)\n- **NFR-A4**: Option to disable screen shake and reduce particle intensity (motion sensitivity)\n- **NFR-A5**: Option to disable haptic feedback for players with haptic sensitivity\n- **NFR-A6**: Minimum contrast ratio 4.5:1 for all text (WCAG AA standard)\n- **NFR-A7**: Font size scaling supports system text size settings (up to 200%)\n\n### Scalability\n\n- **NFR-SC1**: System supports 100,000+ concurrent players processing salvage operations\n- **NFR-SC2**: Inventory system scales to 10,000 items per player without performance degradation\n- **NFR-SC3**: Material counter supports values up to 2^53 (JavaScript safe integer limit)\n- **NFR-SC4**: Automation calculation batching for players with >1000 items queued\n- **NFR-SC5**: Database queries for player state complete within 100ms at 95th percentile\n- **NFR-SC6**: Server-side rate limiting: max 10 salvage operations per second per player (prevents automation exploits)\n\n### Device & Platform Support\n\n- **NFR-D1**: iOS 13+ (iPhone 8 and newer)\n- **NFR-D2**: Android 10+ (API level 29+)\n- **NFR-D3**: Minimum device specs: 2GB RAM, quad-core 1.5GHz processor\n- **NFR-D4**: Graceful degradation on older devices: reduce particle count, disable motion blur\n- **NFR-D5**: Portrait orientation primary, landscape orientation supported\n- **NFR-D6**: Tablet layouts scale UI appropriately (larger touch targets, expanded grids)\n\n### Reliability & Recovery\n\n- **NFR-R1**: Auto-save player state every 10 seconds during active play\n- **NFR-R2**: Failed server sync retries with exponential backoff (3 attempts max)\n- **NFR-R3**: Offline queue stores up to 50 actions for sync when connectivity restored\n- **NFR-R4**: Crash recovery restores to last saved state (max 10 seconds data loss)\n- **NFR-R5**: Network timeout handling: operations queue locally, show \"Syncing...\" indicator\n- **NFR-R6**: Fallback animations: if device struggles, reduce particle count dynamically\n\n---\n\n## 7. Scope Definition\n\n### MVP (Must Have)\n\n**Phase 1: Manual Foundation (P0)**\n- Manual tap-to-salvage with particle effects (5 rarity types)\n- Material collection (auto after 0.5s or manual tap)\n- Basic tinkering: tap equipment, consume materials, upgrade with 100% success\n- Material counters with popup animations\n- 100-slot inventory\n- Level progression 1-10 with XP from salvage actions\n- First automation unlock at Level 10 (Salvage Assistant: 1 item/3s)\n\n**Phase 2: Essential Automation (P0)**\n- Automation upgrade tree: 6 tiers (Levels 10, 13, 15, 18, 22, 26)\n- Manual click bonuses: 2x speed, 5% critical (5x materials)\n- Auto-tinkering toggle (Level 12)\n- Batch selection (Level 8): select up to 20 items\n- Combo system: 10 clicks in 5s = 3x speed for 10 cycles\n- Priority system for equipment (Level 16)\n- UI evolution: Phase 1 → Phase 2 layouts\n\n**Phase 3: Core Endgame (P0)**\n- Master Salvager: 100 items/sec (Level 26)\n- Offline progression: 50% speed, 24-hour cap\n- Basic prestige system: every 1000 items, choose 1 of 3 bonuses (pool of 6)\n- UI evolution: Phase 2 → Phase 3 dashboard\n- Statistics panel: materials gained, items processed, time played\n\n### Nice to Have\n\n**Enhanced Phase 2 Features (P1)**\n- Smart Tinkering AI suggestions (Level 20)\n- Combo visual effects: particle trails, screen glow\n- Advanced batch selection: filters (by rarity, by type)\n- Material refinement: 3 common → 1 rare (Level 15)\n\n**Enhanced Phase 3 Features (P1)**\n- God Click ability: 1000 items instantly, 1-hour cooldown\n- Perfect Salvage: 50% legendary upgrade chance on manual\n- Master's Touch: +5 equipment levels beyond max\n- Extended prestige pool: 12 unique bonuses\n- Forge Mastery: 2-hour cycles with strategic choices (Level 40)\n- Advanced statistics: efficiency metrics, trends, comparisons\n\n**Polish & UX (P1)**\n- Haptic feedback differentiation by action type\n- Screen shake for legendary materials\n- Tutorial system with replay option\n- Milestone celebrations: 10K, 100K, 1M materials\n- Sound effect variations (3 levels of intensity)\n\n**Long-term Features (P2)**\n- Material refinement automation (Level 30)\n- Salvage filters: \"Auto-salvage commons when queue >80%\"\n- Equipment sets: bonus for tinkering related items\n- Seasonal prestige bonuses\n- Leaderboards: fastest to milestones\n- Social features: gift materials to friends\n\n### Out of Scope (Current Release)\n\n- PvP salvage racing or competitive tinkering\n- Trading materials between players\n- Crafting new equipment from materials (future expansion)\n- Material types beyond 5 rarity tiers\n- Multiple save slots or profiles\n- Integration with other game systems (combat, exploration) - interface hooks only\n- Web version or Steam release\n- Equipment visual customization based on tinker level\n\n---\n\n## 8. Dependencies & Risks\n\n| Type | Description | Owner | Mitigation | Status |\n|------|-------------|-------|------------|--------|\n| Technical | Client-side animation performance on lower-end devices during 100 items/sec automation | Engineering | Progressive degradation system: reduce particle count, batch render updates | Planned |\n| Technical | Server-side validation overhead for high-frequency salvage operations | Backend Team | Implement batched validation (validate every 10 operations), client-side rate limiting | Planned |\n| Design | Balancing manual bonus incentives to maintain engagement in Phase 3 | Game Design | A/B test manual bonus multipliers (1.5x, 2x, 3x), monitor Phase 3 manual action rates | Research |\n| Business | Monetization balance: automation shouldn't feel pay-to-win | Product Team | Free players reach full automation by Level 30, premium only accelerates by ~30% | Defined |\n| Integration | Connecting salvage materials to existing equipment/power systems | Systems Team | Define clear interface: materials → equipment power → global power formula | In Progress |\n| UX | Tutorial pacing for 3-phase system without overwhelming new players | UX Team | Contextual tutorials: appear only when feature unlocks, with skip option | Design Phase |\n| Data | Offline progression calculation exploits (clock manipulation) | Backend Team | Server timestamp validation, max 24-hour cap, anomaly detection | Planned |\n\n---\n\n## 9. Timeline & Milestones\n\n### Phase 1: Discovery & Design\n**Duration: 2 weeks**\n- Week 1: Finalize PRD, technical design document, UI mockups (all 3 phases)\n- Week 2: Animation prototypes, balance spreadsheet, monetization integration plan\n\n### Phase 2: Development - MVP Implementation\n**Duration: 6 weeks**\n- Week 3-4: Manual foundation (tap-to-salvage, tinkering, Level 1-10)\n  - Deliverable: Playable Phase 1 with 10 levels\n- Week 5-6: Automation systems (upgrade tree, auto-tinker, manual bonuses)\n  - Deliverable: Phase 2 functional with Levels 11-25\n- Week 7-8: Endgame systems (Master Salvager, offline progression, basic prestige)\n  - Deliverable: Phase 3 complete with Levels 26-35\n- Week 9: UI evolution, phase transitions, polish\n  - Deliverable: Full UI flow from Phase 1 → Phase 3\n\n### Phase 3: Testing & QA\n**Duration: 2 weeks**\n- Week 10: Internal playtesting, balance tuning, bug fixes\n- Week 11: Closed beta (50 players), performance optimization, server load testing\n\n### Phase 4: Launch Preparation\n**Duration: 1 week**\n- Week 12: Analytics integration, A/B test setup, app store assets, soft launch prep\n\n**Total Estimated Time: 12 weeks (3 months)**\n\n**Launch Target: Week 13 (soft launch), Week 14 (full launch)**\n\n---\n\n## 10. Open Questions\n\n- [ ] **Integration Point**: How exactly do salvage materials map to existing equipment stat formulas? Need Systems Team input.\n- [ ] **Monetization**: Should God Click be premium-only or available to all with longer cooldown? A/B test planned?\n- [ ] **Balance**: What's the target materials-per-hour rate at each phase to ensure players don't feel stuck? Need economy design input.\n- [ ] **Technical**: Can we achieve 100 items/sec on target devices without frame drops? Need prototype stress test.\n- [ ] **UX**: Should automation be opt-in (toggle) or automatic with opt-out? User research needed.\n- [ ] **Scope**: Is Master's Touch (+5 levels beyond max) creeping into P1, or can it stay P2? Discuss with stakeholders.\n- [ ] **Analytics**: What are the critical events to track for Phase 2 engagement analysis? Define with data team.\n- [ ] **Localization**: Do particle colors have cultural significance issues in target markets? Check with localization team.\n\n---\n\n## 11. Appendix\n\n### Glossary\n\n- **Salvage**: The act of breaking down items into component materials\n- **Tinkering**: The process of applying materials to upgrade equipment\n- **Automation Tier**: Progressive unlocks that increase passive salvage/tinker speed\n- **Phase**: One of three gameplay stages (Manual, Hybrid, Automation) that evolve with player level\n- **Prestige**: A milestone-based choice system offering temporary or permanent bonuses\n- **God Click**: Endgame ability to process 1000 items with a single tap\n- **Master's Touch**: Ability to upgrade equipment beyond normal maximum levels\n- **Combo**: Rapid manual actions that trigger speed bonuses for automation\n- **Critical Salvage**: 5% chance event that yields 5x materials\n- **Perfect Salvage**: Endgame feature with 50% chance to upgrade material rarity\n- **Material Rarity**: Five-tier system (Common, Rare, Epic, Legendary, Mythic)\n- **Queue**: The ordered list of items awaiting automated processing\n- **Offline Progression**: System that continues salvaging while app is closed\n\n### Related Documents\n\n- Technical Design Document (TDD): To be created from this PRD\n- Game Economy Balance Spreadsheet: Materials/hour projections per level\n- Animation Style Guide: Particle effects and feedback systems\n- Monetization Integration Plan: Premium features and IAP tiers\n- Analytics Event Specification: Tracking plan for engagement metrics\n- UI/UX Mockups: Figma designs for all 3 phase interfaces\n\n### References\n\n- Lean Task Generation Guide: `/docs/guides/lean-task-generation-guide.md`\n- Original Feature Spec: `/docs/specs/salvage-tinkering-system/salvage-tinkering-progressive-automation.md`\n- Game Design Pattern: Incremental/Idle Game Mechanics (Asheron's Call crafting influence)\n\n### Comparative Analysis\n\n**Similar Systems in Market:**\n- **AdVenture Capitalist**: Full automation focus, but lacks manual engagement depth\n- **Melvor Idle**: Strong progression but overwhelming complexity early\n- **Realm Grinder**: Excellent prestige system, less tactile feedback\n- **Clicker Heroes**: Good manual → auto balance, but automation makes manual obsolete\n\n**Our Differentiation**: Maintains manual value throughout all phases, progressive complexity revelation, earned automation as rewards.\n\n---\n\n**Document Generated**: 2025-10-26\n**Next Steps**: Review with stakeholders → Technical Design Document → Prototype Phase 1 mechanics\n**Estimated Development Start**: Week 1 post-approval\n**Target Launch**: 12 weeks post-development start\n"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":212,"cache_read_input_tokens":24994,"cache_creation":{"ephemeral_5m_input_tokens":212,"ephemeral_1h_input_tokens":0},"output_tokens":33,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"49231f7f-ebf3-427a-9814-4b1e4dbf65af"}
{"type":"user","message":{"role":"user","content":[{"type":"tool_result","content":"Claude requested permissions to write to /mnt/c/dev/class-one-rapids/docs/specs/salvage-tinkering-system/prd_salvage_tinkering_progressive_automation_20251026.md, but you haven't granted it yet.","is_error":true,"tool_use_id":"toolu_014waYfHoKb6o1pXJVVYs7qz"}]},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"f9b3c4f7-4ddf-4e80-bdff-4bfc93108ac7"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_01Uq7u8a723Hpk3SbJuDtzoX","type":"message","role":"assistant","content":[{"type":"text","text":"I've generated a comprehensive PRD following the template structure for the Salvage & Tinkering System with Progressive Automation. The document includes:\n\n## Document Highlights:\n\n### Complete Structure (12 sections):\n1. **Header & Metadata** - Version control, executive summary\n2. **Problem & Opportunity** - Player fatigue with manual systems, 40% abandon rate at Level 5\n3. **Solution Overview** - Three-phase progression (Manual → Hybrid → Full Auto)\n4. **Success Metrics** - 8 metrics including primary (session length: 5.2min → 15min), secondary (DAU +40%), and counter-metrics\n5. **User Stories** - 14 detailed stories with Given/When/Then acceptance criteria across 5 epics\n6. **Functional Requirements** - 40+ specific, measurable requirements organized by system\n7. **Non-Functional Requirements** - Performance (<50ms tap response), security, accessibility (WCAG AA), scalability\n8. **Scope Definition** - Clear MVP (P0), Nice-to-Have (P1), and Out-of-Scope items following lean principles\n9. **Dependencies & Risks** - 7 key items with mitigation strategies\n10. **Timeline** - 12-week plan with weekly milestones\n11. **Open Questions** - 8 critical decisions needing stakeholder input\n12. **Appendix** - Glossary, references, competitive analysis\n\n### Key Features:\n- **Measurable throughout**: No vague terms - everything has numbers (100 items/sec, 50ms response, 5% critical chance)\n- **User-focused**: Written from player perspective with clear benefit statements\n- **Lean-compliant**: MVP focuses on deliverable features, not infrastructure\n- **Realistic metrics**: Based on comparable idle game patterns (40-60% DAU increase, 3x LTV for crafting engagers)\n- **Complete edge cases**: Offline caps, conflict resolution, device degradation\n- **Counter-metrics**: Ensures automation doesn't kill manual engagement (70%+ still clicking in Phase 3)\n\nThe PRD is ready for stakeholder review and would enable immediate technical design document generation. Would you like me to create the file?"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":8847,"cache_read_input_tokens":25206,"cache_creation":{"ephemeral_5m_input_tokens":8847,"ephemeral_1h_input_tokens":0},"output_tokens":509,"service_tier":"standard"}},"parent_tool_use_id":null,"session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","uuid":"6058b40e-1ff9-4e90-8d43-992e1e342eae"}
{"type":"result","subtype":"success","is_error":false,"duration_ms":240651,"duration_api_ms":236830,"num_turns":15,"result":"I've generated a comprehensive PRD following the template structure for the Salvage & Tinkering System with Progressive Automation. The document includes:\n\n## Document Highlights:\n\n### Complete Structure (12 sections):\n1. **Header & Metadata** - Version control, executive summary\n2. **Problem & Opportunity** - Player fatigue with manual systems, 40% abandon rate at Level 5\n3. **Solution Overview** - Three-phase progression (Manual → Hybrid → Full Auto)\n4. **Success Metrics** - 8 metrics including primary (session length: 5.2min → 15min), secondary (DAU +40%), and counter-metrics\n5. **User Stories** - 14 detailed stories with Given/When/Then acceptance criteria across 5 epics\n6. **Functional Requirements** - 40+ specific, measurable requirements organized by system\n7. **Non-Functional Requirements** - Performance (<50ms tap response), security, accessibility (WCAG AA), scalability\n8. **Scope Definition** - Clear MVP (P0), Nice-to-Have (P1), and Out-of-Scope items following lean principles\n9. **Dependencies & Risks** - 7 key items with mitigation strategies\n10. **Timeline** - 12-week plan with weekly milestones\n11. **Open Questions** - 8 critical decisions needing stakeholder input\n12. **Appendix** - Glossary, references, competitive analysis\n\n### Key Features:\n- **Measurable throughout**: No vague terms - everything has numbers (100 items/sec, 50ms response, 5% critical chance)\n- **User-focused**: Written from player perspective with clear benefit statements\n- **Lean-compliant**: MVP focuses on deliverable features, not infrastructure\n- **Realistic metrics**: Based on comparable idle game patterns (40-60% DAU increase, 3x LTV for crafting engagers)\n- **Complete edge cases**: Offline caps, conflict resolution, device degradation\n- **Counter-metrics**: Ensures automation doesn't kill manual engagement (70%+ still clicking in Phase 3)\n\nThe PRD is ready for stakeholder review and would enable immediate technical design document generation. Would you like me to create the file?","session_id":"6cc9b5ae-8057-4520-ac16-06053202db01","total_cost_usd":0.31199804999999997,"usage":{"input_tokens":32,"cache_creation_input_tokens":34053,"cache_read_input_tokens":117701,"output_tokens":9724,"server_tool_use":{"web_search_requests":0},"service_tier":"standard","cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":34053}},"modelUsage":{"claude-haiku-4-5-20251001":{"inputTokens":1923,"outputTokens":222,"cacheReadInputTokens":0,"cacheCreationInputTokens":0,"webSearchRequests":0,"costUSD":0.003033,"contextWindow":200000},"claude-sonnet-4-5-20250929":{"inputTokens":32,"outputTokens":9724,"cacheReadInputTokens":117701,"cacheCreationInputTokens":34053,"webSearchRequests":0,"costUSD":0.30896504999999996,"contextWindow":200000}},"permission_denials":[{"tool_name":"Write","tool_use_id":"toolu_014waYfHoKb6o1pXJVVYs7qz","tool_input":{"file_path":"/mnt/c/dev/class-one-rapids/docs/specs/salvage-tinkering-system/prd_salvage_tinkering_progressive_automation_20251026.md","content":"# Product Requirements Document: Salvage & Tinkering System with Progressive Automation\n\n## Document Information\n\n| Version | Author | Date | Status |\n|---------|--------|------|--------|\n| v1.0 | Game Design Team | 2025-10-26 | Draft |\n\n### Executive Summary\n\nThe Salvage & Tinkering System introduces a progressively automated idle game mechanic where players manually salvage items for materials and upgrade equipment through tinkering. The system evolves from satisfying manual crafting (Levels 1-10) through strategic hybrid automation (Levels 11-25) to full optimization gameplay (Level 26+), creating a compelling engagement loop that rewards both active play and idle progression while maintaining player agency throughout.\n\n---\n\n## 1. Problem & Opportunity\n\n### Problem Statement\n\nMobile idle/incremental games face a fundamental tension: manual clicking provides satisfying feedback but becomes tedious, while premature automation removes player engagement. Current games either:\n- Force repetitive manual actions that feel like work (player fatigue at 20-30 min)\n- Introduce automation too early, removing the satisfaction of progress (50% drop-off when automation starts)\n- Create disconnected manual and auto systems that compete rather than complement\n\nPlayers need a crafting/progression system that naturally transitions from engaging manual gameplay to strategic automation without losing the core satisfaction loop.\n\n### User Impact\n\n**Who's Affected:**\n- **Primary**: 100% of players engaging with equipment progression (core game loop)\n- **Secondary**: Players seeking idle/passive progression (estimated 70% of player base)\n- **Frequency**: Multiple times per session, daily engagement\n\n**Current Experience:**\n- Equipment upgrades require manual material gathering (tedious after 50+ items)\n- No offline progression for crafting systems\n- Material management becomes overwhelming at scale (200+ items)\n- Players must choose between tedious clicking or no progression\n\n### Business Impact\n\n**Cost of Not Solving:**\n- **Retention**: Session lengths plateau at 15 minutes vs target 30+ minutes\n- **Monetization**: Limited premium upgrade paths without automation systems\n- **Engagement**: 40% of players abandon equipment system after Level 5\n- **Lifetime Value**: Players who engage with crafting have 3x higher LTV but only 30% currently do so\n\n**Opportunity:**\n- Idle/incremental mechanics increase daily active users by 40-60% in comparable games\n- Automation systems create clear monetization tiers (speed boosts, offline bonuses)\n- Progressive complexity naturally segments players by engagement level\n\n### Evidence\n\n**Hypothetical Metrics (Based on Similar Games):**\n- Average salvage session: 5.2 minutes (target: 15+ minutes)\n- Manual clicks per session: 47 (unsustainable beyond Level 10)\n- Equipment upgrade frequency: 2.1 per day (target: 8-12 per day with automation)\n- Material inventory turnover: 68% unused (indicates poor engagement loop)\n\n---\n\n## 2. Solution Overview\n\n### Approach\n\nA three-phase progression system that transforms the salvage and tinkering experience:\n\n**Phase 1: Manual Crafting Foundation (Levels 1-10)**\n- Direct click-to-salvage with satisfying visual/audio feedback\n- 100% success rate tinkering to build confidence\n- Simple material collection and equipment upgrade flow\n- First automation unlock at Level 10 as major milestone\n\n**Phase 2: Assisted Automation (Levels 11-25)**\n- Gradual automation unlocks through dual progression trees\n- Hybrid gameplay where manual actions provide bonuses (2x speed, critical success)\n- Strategic decision-making: automation priorities, resource allocation\n- Active play remains superior but automation provides baseline progress\n\n**Phase 3: Full Automation & Optimization (Level 26+)**\n- Complete automation with offline progression\n- High-level strategic decisions (prestige choices, forge cycles)\n- Manual \"god mode\" abilities for active players (1000x processing, legendary chances)\n- Optimization and big number satisfaction\n\n### Value Proposition\n\n**For Active Players:**\n- Satisfying manual gameplay that remains rewarding at all levels\n- Manual bonuses ensure clicking is always valuable (2x speed, 5x materials)\n- Strategic depth through automation management and prestige choices\n\n**For Idle Players:**\n- Gradual automation unlocks create clear progression goals\n- Offline progression after Level 26 enables daily check-in gameplay\n- Set-and-forget systems with periodic optimization opportunities\n\n**For All Players:**\n- Natural learning curve: master manual mechanics before automation\n- Each automation feels earned, not handed out\n- Continuous sense of advancement through 40+ levels\n\n### Key Differentiators\n\n1. **Earned Automation**: Each automation tier is a reward for progression, not a default feature\n2. **Maintained Agency**: Manual play always provides significant bonuses, never becomes obsolete\n3. **Hybrid Gameplay**: Seamless blend of active and idle mechanics in Phase 2\n4. **Progressive UI Evolution**: Interface complexity matches player mastery\n5. **No-Failure Learning**: Phase 1 eliminates frustration during tutorial period\n\n---\n\n## 3. Success Metrics\n\n| Metric | Current | Target | Timeline | Type |\n|--------|---------|--------|----------|------|\n| Average salvage session length | 5.2 min | 15+ min | 4 weeks post-launch | Primary |\n| Equipment system engagement rate | 30% | 70% | 8 weeks post-launch | Primary |\n| Daily active users (DAU) retention | Baseline | +40% | 12 weeks post-launch | Primary |\n| Average revenue per paying user (ARPPU) | Baseline | +50% | 12 weeks post-launch | Secondary |\n| Phase 2 completion rate (Level 25+) | N/A | 50% | 8 weeks post-launch | Secondary |\n| Daily sessions per user | Baseline | +2.5 sessions | 8 weeks post-launch | Secondary |\n| Average click rate in Phase 3 | N/A | >10 clicks/min | 12 weeks post-launch | Counter |\n| Manual action engagement drop-off | N/A | <30% | 12 weeks post-launch | Counter |\n\n**Counter-Metric Rationale**: Monitor that automation doesn't completely replace manual play. Target: 70%+ of Phase 3 players still perform manual actions weekly.\n\n---\n\n## 4. User Stories & Requirements\n\n### Epic 1: Manual Salvaging Foundation\n\n**Story 1.1: Basic Salvaging**\nAs a player\nI want to tap items in my inventory to salvage them\nSo that I can collect materials for equipment upgrades\n\n**Acceptance Criteria:**\n- [ ] Given I have items in inventory, when I tap an item, then a 0.5-second salvage animation plays\n- [ ] Given salvage completes, when animation ends, then materials appear with particle effects matching material rarity\n- [ ] Given materials appear, when 0.5 seconds pass, then materials auto-collect to material counter\n- [ ] Given manual collection, when I tap floating materials, then they immediately collect\n- [ ] Given successful salvage, when materials collect, then counter updates with popup number animation (+X)\n- [ ] Given inventory slot empties, when salvage completes, then slot is ready for next item immediately\n\n**Story 1.2: Material Discovery**\nAs a new player\nI want to see different visual feedback for different material types\nSo that I understand the value of what I'm collecting\n\n**Acceptance Criteria:**\n- [ ] Given common material drops, when salvaging, then blue particles emit\n- [ ] Given rare material drops, when salvaging, then purple particles emit with stronger glow\n- [ ] Given epic material drops, when salvaging, then gold particles emit with screen edge glow\n- [ ] Given legendary material drops, when salvaging, then rainbow particles emit with screen shake and unique sound\n- [ ] Given first discovery of material type, when collected, then brief tooltip shows \"[Material] discovered!\"\n\n**Story 1.3: Manual Tinkering**\nAs a player\nI want to use collected materials to upgrade my equipment\nSo that I can increase my power level\n\n**Acceptance Criteria:**\n- [ ] Given I have sufficient materials, when I tap equipment piece, then tinkering interface opens\n- [ ] Given tinkering interface open, when I tap \"Upgrade\" button, then 2-second channeling animation plays\n- [ ] Given channeling completes, when timer reaches 0, then equipment shows \"+1\" with success particles\n- [ ] Given successful upgrade, when animation completes, then power level increases visibly\n- [ ] Given insufficient materials, when I tap \"Upgrade\", then button is disabled with red tint and shows \"Need X more [material]\"\n- [ ] Given Phase 1 (Levels 1-10), when any upgrade occurs, then success rate is 100%\n\n### Epic 2: Early Automation Unlocks\n\n**Story 2.1: Batch Processing**\nAs a player progressing to Level 8\nI want to select multiple items for salvage\nSo that I can process materials more efficiently\n\n**Acceptance Criteria:**\n- [ ] Given Level 8 reached, when tutorial displays, then batch select feature is explained\n- [ ] Given batch mode available, when I shift-tap items, then items highlight with selection border\n- [ ] Given items selected, when I tap \"Salvage All Selected\" button, then items process sequentially at 2 items/second\n- [ ] Given batch salvaging, when processing, then progress bar shows X/Y items completed\n- [ ] Given batch complete, when all items processed, then summary shows total materials gained\n\n**Story 2.2: First Automation Assistant**\nAs a player reaching Level 10\nI want to unlock automated salvaging\nSo that I can progress while focusing on other gameplay\n\n**Acceptance Criteria:**\n- [ ] Given Level 10 reached, when level-up occurs, then major celebration animation plays\n- [ ] Given celebration complete, when dismissed, then \"Salvage Assistant Unlocked!\" modal appears\n- [ ] Given assistant unlocked, when activated, then assistant icon appears in UI\n- [ ] Given assistant active, when items in inventory, then assistant salvages 1 item every 3 seconds automatically\n- [ ] Given assistant running, when I manual-click items, then manual actions process immediately (don't wait for assistant cycle)\n- [ ] Given assistant working, when inventory empties, then assistant enters idle state with \"Waiting for items\" indicator\n\n### Epic 3: Hybrid Automation Phase\n\n**Story 3.1: Automation Progression Tree**\nAs a mid-level player (11-25)\nI want to upgrade my automation capabilities\nSo that I can increase my passive income while maintaining active bonuses\n\n**Acceptance Criteria:**\n- [ ] Given Level 11 reached, when accessing automation menu, then upgrade tree displays with locked/unlocked tiers\n- [ ] Given viewing tree, when I tap any node, then tooltip shows: level requirement, cost, effect description\n- [ ] Given sufficient resources, when I purchase upgrade, then confirmation modal shows before/after stats\n- [ ] Given upgrade purchased, when confirmed, then visual effect connects node to previous tier\n- [ ] Given upgrade active, when salvaging occurs, then new rate applies immediately\n- [ ] Upgrade progression: Level 11 (1/3s) → L13 (1/2s) → L15 (1/1s) → L18 (3/s) → L22 (10/s)\n\n**Story 3.2: Manual Click Bonuses**\nAs an active player in Phase 2\nI want manual actions to provide significant advantages\nSo that active play feels rewarding alongside automation\n\n**Acceptance Criteria:**\n- [ ] Given automation active, when I manual-click salvage, then item processes 2x faster than automation speed\n- [ ] Given 10 manual clicks within 5 seconds, when threshold reached, then \"COMBO!\" appears and next 10 automation cycles are 3x speed\n- [ ] Given manual salvage, when processing, then 5% chance for critical salvage (screen flash + \"CRITICAL!\" text)\n- [ ] Given critical salvage, when materials drop, then 5x materials are rewarded\n- [ ] Given manual tinkering, when upgrading equipment, then material cost is 50% of auto-tinkering cost\n- [ ] Given manual actions, when performed, then UI shows comparison: \"Manual: 2.0/sec | Auto: 1.0/sec\"\n\n**Story 3.3: Auto-Tinkering System**\nAs a player reaching Level 12\nI want equipment to upgrade automatically\nSo that I don't need to manually manage each upgrade\n\n**Acceptance Criteria:**\n- [ ] Given Level 12 reached, when unlocked, then \"Auto-Tinker\" toggle appears on equipment pieces\n- [ ] Given auto-tinker enabled, when sufficient materials available, then upgrade automatically initiates\n- [ ] Given auto-tinkering, when in progress, then circular progress bar fills over 2 seconds\n- [ ] Given multiple equipment pieces, when setting priority (Level 16), then materials distribute based on priority order (1-6)\n- [ ] Given priority set, when materials available, then highest priority unfulfilled item receives materials\n- [ ] Given Smart Tinkering unlocked (Level 20), when activated, then AI suggests optimal distribution with \"Accept\" button\n\n### Epic 4: Full Automation & Endgame\n\n**Story 4.1: Master Salvager System**\nAs a late-game player (Level 26+)\nI want full automation with offline progression\nSo that I can progress even when not actively playing\n\n**Acceptance Criteria:**\n- [ ] Given Level 26 reached, when Master Salvager unlocked, then automation processes up to 100 items/second\n- [ ] Given offline, when app closed, then system continues processing at 50% of active rate\n- [ ] Given offline for X hours, when returning, then summary modal shows: items processed, materials gained, time elapsed\n- [ ] Given queue capacity, when reached, then notification warns \"Queue full: 10,000 items\"\n- [ ] Given queue management, when full, then oldest common items auto-salvage to make room\n- [ ] Given offline gains, when exceeding 24 hours, then cap applies at 24 hours of progression (prevents exploit)\n\n**Story 4.2: Prestige Salvaging**\nAs an advanced player (Level 35+)\nI want meaningful choices that affect my salvaging strategy\nSo that I can optimize for different goals\n\n**Acceptance Criteria:**\n- [ ] Given 1000 items salvaged, when milestone reached, then prestige choice modal appears\n- [ ] Given prestige choice, when presented, then 3 random options appear from pool of 12 bonuses\n- [ ] Given viewing choices, when hovering, then detailed effect and duration display\n- [ ] Given choice selected, when confirmed, then bonus activates with timer in UI\n- [ ] Given bonus active, when timer expires, then visual effect fades and bonus deactivates\n- [ ] Bonus examples: +10% materials (1hr), Next 100 = guaranteed rare (no timer), 2x tinker speed (30min)\n\n**Story 4.3: God Mode Manual Actions**\nAs a max-level active player\nI want extremely powerful manual abilities\nSo that active play remains valuable at endgame\n\n**Acceptance Criteria:**\n- [ ] Given God Click unlocked (Level 40), when activated, then next click processes 1000 items instantly\n- [ ] Given God Click used, when activated, then 1-hour cooldown begins with timer display\n- [ ] Given manual salvage at endgame, when clicking, then 50% chance for legendary material upgrade\n- [ ] Given Master's Touch active, when manual tinkering, then can upgrade beyond normal max (+5 bonus levels)\n- [ ] Given manual actions in Phase 3, when performed, then special visual effects (golden glow) distinguish from automation\n\n### Epic 5: UI Evolution\n\n**Story 5.1: Phase-Appropriate Interface**\nAs a player progressing through phases\nI want the UI to match my current gameplay needs\nSo that I'm not overwhelmed early or under-informed late\n\n**Acceptance Criteria:**\n- [ ] Given Phase 1 (Levels 1-10), when viewing UI, then only inventory grid, material counters, and equipment slots visible\n- [ ] Given Phase 2 (Levels 11-25), when UI evolves, then automation controls, progress bars, and upgrade tree appear\n- [ ] Given Phase 3 (Levels 26+), when UI evolves, then command center view with statistics, efficiency metrics, and prestige options display\n- [ ] Given UI transition, when phase changes, then brief animated tutorial highlights new elements\n- [ ] Given any phase, when player taps \"?\" icon, then current phase tutorial can be replayed\n\n**Story 5.2: Streaming Number Satisfaction**\nAs an idle game player\nI want to see numbers increasing continuously\nSo that I feel progression happening\n\n**Acceptance Criteria:**\n- [ ] Given automation active (Phase 2+), when materials gained, then counter increments with smooth animation\n- [ ] Given high-speed automation (Phase 3), when processing >10 items/sec, then numbers stream upward continuously\n- [ ] Given power level, when increasing, then +X/hour rate displays next to total\n- [ ] Given Phase 3, when viewing dashboard, then efficiency percentage (0-100%) displays based on optimal performance\n- [ ] Given milestones, when reached (10k, 100k, 1M materials), then celebration animation triggers\n\n---\n\n## 5. Functional Requirements\n\n### Salvaging System\n\n- **FR-S1**: Tap-to-salvage responds within 50ms with tactile feedback (vibration on mobile)\n- **FR-S2**: Each item type has unique particle effect color and intensity matching rarity\n- **FR-S3**: Material collection auto-triggers after 0.5s or immediately on tap\n- **FR-S4**: Salvage animation duration scales: Common 0.5s, Rare 0.7s, Epic 0.9s, Legendary 1.2s\n- **FR-S5**: Material drops calculated using server-validated loot tables (prevent client manipulation)\n- **FR-S6**: Inventory supports minimum 100 slots (Phase 1) scaling to 10,000 slots (Phase 3)\n- **FR-S7**: Batch selection supports up to 50 items simultaneously\n- **FR-S8**: Queue system processes items in FIFO order unless priority rules apply\n\n### Tinkering System\n\n- **FR-T1**: Equipment upgrade cost follows formula: `baseCost * (1.15 ^ currentLevel)`\n- **FR-T2**: Manual tinkering applies 50% material cost discount in Phase 2+\n- **FR-T3**: Success rate is 100% for Levels 1-10, introduces failure chance (90% base) at Level 11+\n- **FR-T4**: Auto-tinkering processes one upgrade attempt every 2 seconds per equipment piece\n- **FR-T5**: Priority system (Level 16+) supports 1-6 ranking for 6 equipment slots\n- **FR-T6**: Smart Tinkering AI suggests distribution based on: current levels, material availability, cost efficiency\n- **FR-T7**: Equipment power level contributes to global player power using weighted sum\n\n### Automation System\n\n- **FR-A1**: Automation speeds: L10 (0.33/s) → L13 (0.5/s) → L15 (1/s) → L18 (3/s) → L22 (10/s) → L26 (100/s)\n- **FR-A2**: Manual click speed is always 2x current automation speed\n- **FR-A3**: Combo system requires 10 manual actions within 5-second window\n- **FR-A4**: Combo bonus applies 3x speed multiplier to next 10 automation cycles\n- **FR-A5**: Critical salvage has 5% base chance, increased by gear bonuses, provides 5x materials\n- **FR-A6**: Automation upgrade costs scale exponentially: `baseUpgradeCost * (1.5 ^ tier)`\n- **FR-A7**: Offline progression calculates at 50% of active automation speed\n- **FR-A8**: Offline progression caps at 24 hours of equivalent active time\n\n### Prestige System\n\n- **FR-P1**: Prestige triggers every 1000 items salvaged (counter persists across sessions)\n- **FR-P2**: Prestige choice pool contains 12 unique bonuses, 3 randomly selected each trigger\n- **FR-P3**: Bonus effects stack if same bonus selected multiple times (additive stacking)\n- **FR-P4**: Timed bonuses display remaining duration in MM:SS format\n- **FR-P5**: Count-based bonuses display remaining charges (e.g., \"Guaranteed Rare: 47/100\")\n- **FR-P6**: Prestige history viewable in statistics panel (last 10 choices)\n\n### God Mode Abilities\n\n- **FR-G1**: God Click processes 1000 items instantly with single tap, 1-hour cooldown\n- **FR-G2**: God Click cooldown persists across sessions, displays countdown timer\n- **FR-G3**: Perfect Salvage grants 50% chance for legendary material on manual salvage (Phase 3)\n- **FR-G4**: Master's Touch allows equipment to exceed normal max level by +5\n- **FR-G5**: Master's Touch upgrades have 75% success rate, failure consumes materials\n- **FR-G6**: God Mode visual effects include golden particle trails and screen border glow\n\n### UI & Feedback Systems\n\n- **FR-U1**: Phase 1 UI displays: 4x8 inventory grid, 3 material counters, 6 equipment slots\n- **FR-U2**: Phase 2 UI adds: automation control panel, upgrade tree (12 nodes), progress bars\n- **FR-U3**: Phase 3 UI adds: statistics dashboard, efficiency meter, prestige panel, streaming numbers\n- **FR-U4**: Material counters support up to 999,999,999 with K/M/B suffix formatting\n- **FR-U5**: Animations use device-appropriate frame rates (60 FPS target, 30 FPS minimum)\n- **FR-U6**: Sound effects have 3-tier system: UI clicks (quiet), salvage effects (medium), milestone celebrations (loud)\n- **FR-U7**: Haptic feedback intensity scales with action importance: tap (light), upgrade (medium), prestige (strong)\n\n---\n\n## 6. Non-Functional Requirements\n\n### Performance\n\n- **NFR-P1**: Salvage tap response time <50ms from touch to visual feedback\n- **NFR-P2**: Animation frame rate maintains ≥30 FPS on devices from 2020+ (iOS 13+, Android 10+)\n- **NFR-P3**: High-speed automation (100 items/sec) processes without UI stutter or dropped frames\n- **NFR-P4**: Material counter updates batch at 16ms intervals (60 Hz) even during rapid gains\n- **NFR-P5**: Offline progression calculation completes within 3 seconds of app resume\n- **NFR-P6**: Memory footprint remains under 150MB during normal gameplay\n- **NFR-P7**: Battery impact <5% per hour of active gameplay on standard devices\n\n### Data Integrity & Security\n\n- **NFR-S1**: Material drop rates validated server-side with signed loot table responses\n- **NFR-S2**: Automation speeds validated against server-side expected ranges (±10% tolerance for latency)\n- **NFR-S3**: Offline progression requires server timestamp validation to prevent clock manipulation\n- **NFR-S4**: Player save data encrypted at rest using AES-256\n- **NFR-S5**: Critical actions (prestige, God Click) require server confirmation before UI update\n- **NFR-S6**: Inventory state syncs to server every 30 seconds during active play\n- **NFR-S7**: Conflict resolution prioritizes server state if local/remote mismatch detected\n\n### Accessibility\n\n- **NFR-A1**: All tappable elements minimum 44x44pt touch targets (iOS HIG compliance)\n- **NFR-A2**: Color blindness support: particle effects include shape differentiation (stars, circles, diamonds)\n- **NFR-A3**: Screen reader support for all UI text and state changes (iOS VoiceOver, Android TalkBack)\n- **NFR-A4**: Option to disable screen shake and reduce particle intensity (motion sensitivity)\n- **NFR-A5**: Option to disable haptic feedback for players with haptic sensitivity\n- **NFR-A6**: Minimum contrast ratio 4.5:1 for all text (WCAG AA standard)\n- **NFR-A7**: Font size scaling supports system text size settings (up to 200%)\n\n### Scalability\n\n- **NFR-SC1**: System supports 100,000+ concurrent players processing salvage operations\n- **NFR-SC2**: Inventory system scales to 10,000 items per player without performance degradation\n- **NFR-SC3**: Material counter supports values up to 2^53 (JavaScript safe integer limit)\n- **NFR-SC4**: Automation calculation batching for players with >1000 items queued\n- **NFR-SC5**: Database queries for player state complete within 100ms at 95th percentile\n- **NFR-SC6**: Server-side rate limiting: max 10 salvage operations per second per player (prevents automation exploits)\n\n### Device & Platform Support\n\n- **NFR-D1**: iOS 13+ (iPhone 8 and newer)\n- **NFR-D2**: Android 10+ (API level 29+)\n- **NFR-D3**: Minimum device specs: 2GB RAM, quad-core 1.5GHz processor\n- **NFR-D4**: Graceful degradation on older devices: reduce particle count, disable motion blur\n- **NFR-D5**: Portrait orientation primary, landscape orientation supported\n- **NFR-D6**: Tablet layouts scale UI appropriately (larger touch targets, expanded grids)\n\n### Reliability & Recovery\n\n- **NFR-R1**: Auto-save player state every 10 seconds during active play\n- **NFR-R2**: Failed server sync retries with exponential backoff (3 attempts max)\n- **NFR-R3**: Offline queue stores up to 50 actions for sync when connectivity restored\n- **NFR-R4**: Crash recovery restores to last saved state (max 10 seconds data loss)\n- **NFR-R5**: Network timeout handling: operations queue locally, show \"Syncing...\" indicator\n- **NFR-R6**: Fallback animations: if device struggles, reduce particle count dynamically\n\n---\n\n## 7. Scope Definition\n\n### MVP (Must Have)\n\n**Phase 1: Manual Foundation (P0)**\n- Manual tap-to-salvage with particle effects (5 rarity types)\n- Material collection (auto after 0.5s or manual tap)\n- Basic tinkering: tap equipment, consume materials, upgrade with 100% success\n- Material counters with popup animations\n- 100-slot inventory\n- Level progression 1-10 with XP from salvage actions\n- First automation unlock at Level 10 (Salvage Assistant: 1 item/3s)\n\n**Phase 2: Essential Automation (P0)**\n- Automation upgrade tree: 6 tiers (Levels 10, 13, 15, 18, 22, 26)\n- Manual click bonuses: 2x speed, 5% critical (5x materials)\n- Auto-tinkering toggle (Level 12)\n- Batch selection (Level 8): select up to 20 items\n- Combo system: 10 clicks in 5s = 3x speed for 10 cycles\n- Priority system for equipment (Level 16)\n- UI evolution: Phase 1 → Phase 2 layouts\n\n**Phase 3: Core Endgame (P0)**\n- Master Salvager: 100 items/sec (Level 26)\n- Offline progression: 50% speed, 24-hour cap\n- Basic prestige system: every 1000 items, choose 1 of 3 bonuses (pool of 6)\n- UI evolution: Phase 2 → Phase 3 dashboard\n- Statistics panel: materials gained, items processed, time played\n\n### Nice to Have\n\n**Enhanced Phase 2 Features (P1)**\n- Smart Tinkering AI suggestions (Level 20)\n- Combo visual effects: particle trails, screen glow\n- Advanced batch selection: filters (by rarity, by type)\n- Material refinement: 3 common → 1 rare (Level 15)\n\n**Enhanced Phase 3 Features (P1)**\n- God Click ability: 1000 items instantly, 1-hour cooldown\n- Perfect Salvage: 50% legendary upgrade chance on manual\n- Master's Touch: +5 equipment levels beyond max\n- Extended prestige pool: 12 unique bonuses\n- Forge Mastery: 2-hour cycles with strategic choices (Level 40)\n- Advanced statistics: efficiency metrics, trends, comparisons\n\n**Polish & UX (P1)**\n- Haptic feedback differentiation by action type\n- Screen shake for legendary materials\n- Tutorial system with replay option\n- Milestone celebrations: 10K, 100K, 1M materials\n- Sound effect variations (3 levels of intensity)\n\n**Long-term Features (P2)**\n- Material refinement automation (Level 30)\n- Salvage filters: \"Auto-salvage commons when queue >80%\"\n- Equipment sets: bonus for tinkering related items\n- Seasonal prestige bonuses\n- Leaderboards: fastest to milestones\n- Social features: gift materials to friends\n\n### Out of Scope (Current Release)\n\n- PvP salvage racing or competitive tinkering\n- Trading materials between players\n- Crafting new equipment from materials (future expansion)\n- Material types beyond 5 rarity tiers\n- Multiple save slots or profiles\n- Integration with other game systems (combat, exploration) - interface hooks only\n- Web version or Steam release\n- Equipment visual customization based on tinker level\n\n---\n\n## 8. Dependencies & Risks\n\n| Type | Description | Owner | Mitigation | Status |\n|------|-------------|-------|------------|--------|\n| Technical | Client-side animation performance on lower-end devices during 100 items/sec automation | Engineering | Progressive degradation system: reduce particle count, batch render updates | Planned |\n| Technical | Server-side validation overhead for high-frequency salvage operations | Backend Team | Implement batched validation (validate every 10 operations), client-side rate limiting | Planned |\n| Design | Balancing manual bonus incentives to maintain engagement in Phase 3 | Game Design | A/B test manual bonus multipliers (1.5x, 2x, 3x), monitor Phase 3 manual action rates | Research |\n| Business | Monetization balance: automation shouldn't feel pay-to-win | Product Team | Free players reach full automation by Level 30, premium only accelerates by ~30% | Defined |\n| Integration | Connecting salvage materials to existing equipment/power systems | Systems Team | Define clear interface: materials → equipment power → global power formula | In Progress |\n| UX | Tutorial pacing for 3-phase system without overwhelming new players | UX Team | Contextual tutorials: appear only when feature unlocks, with skip option | Design Phase |\n| Data | Offline progression calculation exploits (clock manipulation) | Backend Team | Server timestamp validation, max 24-hour cap, anomaly detection | Planned |\n\n---\n\n## 9. Timeline & Milestones\n\n### Phase 1: Discovery & Design\n**Duration: 2 weeks**\n- Week 1: Finalize PRD, technical design document, UI mockups (all 3 phases)\n- Week 2: Animation prototypes, balance spreadsheet, monetization integration plan\n\n### Phase 2: Development - MVP Implementation\n**Duration: 6 weeks**\n- Week 3-4: Manual foundation (tap-to-salvage, tinkering, Level 1-10)\n  - Deliverable: Playable Phase 1 with 10 levels\n- Week 5-6: Automation systems (upgrade tree, auto-tinker, manual bonuses)\n  - Deliverable: Phase 2 functional with Levels 11-25\n- Week 7-8: Endgame systems (Master Salvager, offline progression, basic prestige)\n  - Deliverable: Phase 3 complete with Levels 26-35\n- Week 9: UI evolution, phase transitions, polish\n  - Deliverable: Full UI flow from Phase 1 → Phase 3\n\n### Phase 3: Testing & QA\n**Duration: 2 weeks**\n- Week 10: Internal playtesting, balance tuning, bug fixes\n- Week 11: Closed beta (50 players), performance optimization, server load testing\n\n### Phase 4: Launch Preparation\n**Duration: 1 week**\n- Week 12: Analytics integration, A/B test setup, app store assets, soft launch prep\n\n**Total Estimated Time: 12 weeks (3 months)**\n\n**Launch Target: Week 13 (soft launch), Week 14 (full launch)**\n\n---\n\n## 10. Open Questions\n\n- [ ] **Integration Point**: How exactly do salvage materials map to existing equipment stat formulas? Need Systems Team input.\n- [ ] **Monetization**: Should God Click be premium-only or available to all with longer cooldown? A/B test planned?\n- [ ] **Balance**: What's the target materials-per-hour rate at each phase to ensure players don't feel stuck? Need economy design input.\n- [ ] **Technical**: Can we achieve 100 items/sec on target devices without frame drops? Need prototype stress test.\n- [ ] **UX**: Should automation be opt-in (toggle) or automatic with opt-out? User research needed.\n- [ ] **Scope**: Is Master's Touch (+5 levels beyond max) creeping into P1, or can it stay P2? Discuss with stakeholders.\n- [ ] **Analytics**: What are the critical events to track for Phase 2 engagement analysis? Define with data team.\n- [ ] **Localization**: Do particle colors have cultural significance issues in target markets? Check with localization team.\n\n---\n\n## 11. Appendix\n\n### Glossary\n\n- **Salvage**: The act of breaking down items into component materials\n- **Tinkering**: The process of applying materials to upgrade equipment\n- **Automation Tier**: Progressive unlocks that increase passive salvage/tinker speed\n- **Phase**: One of three gameplay stages (Manual, Hybrid, Automation) that evolve with player level\n- **Prestige**: A milestone-based choice system offering temporary or permanent bonuses\n- **God Click**: Endgame ability to process 1000 items with a single tap\n- **Master's Touch**: Ability to upgrade equipment beyond normal maximum levels\n- **Combo**: Rapid manual actions that trigger speed bonuses for automation\n- **Critical Salvage**: 5% chance event that yields 5x materials\n- **Perfect Salvage**: Endgame feature with 50% chance to upgrade material rarity\n- **Material Rarity**: Five-tier system (Common, Rare, Epic, Legendary, Mythic)\n- **Queue**: The ordered list of items awaiting automated processing\n- **Offline Progression**: System that continues salvaging while app is closed\n\n### Related Documents\n\n- Technical Design Document (TDD): To be created from this PRD\n- Game Economy Balance Spreadsheet: Materials/hour projections per level\n- Animation Style Guide: Particle effects and feedback systems\n- Monetization Integration Plan: Premium features and IAP tiers\n- Analytics Event Specification: Tracking plan for engagement metrics\n- UI/UX Mockups: Figma designs for all 3 phase interfaces\n\n### References\n\n- Lean Task Generation Guide: `/docs/guides/lean-task-generation-guide.md`\n- Original Feature Spec: `/docs/specs/salvage-tinkering-system/salvage-tinkering-progressive-automation.md`\n- Game Design Pattern: Incremental/Idle Game Mechanics (Asheron's Call crafting influence)\n\n### Comparative Analysis\n\n**Similar Systems in Market:**\n- **AdVenture Capitalist**: Full automation focus, but lacks manual engagement depth\n- **Melvor Idle**: Strong progression but overwhelming complexity early\n- **Realm Grinder**: Excellent prestige system, less tactile feedback\n- **Clicker Heroes**: Good manual → auto balance, but automation makes manual obsolete\n\n**Our Differentiation**: Maintains manual value throughout all phases, progressive complexity revelation, earned automation as rewards.\n\n---\n\n**Document Generated**: 2025-10-26\n**Next Steps**: Review with stakeholders → Technical Design Document → Prototype Phase 1 mechanics\n**Estimated Development Start**: Week 1 post-approval\n**Target Launch**: 12 weeks post-development start\n"}}],"uuid":"2f34976d-5236-49cb-9627-02a7a143a0bc"}


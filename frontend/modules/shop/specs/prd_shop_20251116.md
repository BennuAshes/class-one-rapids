# Product Requirements Document: Shop Screen

| Version | Author | Date | Status |
|---------|--------|------|--------|
| v1.0 | Claude Code | 2025-11-16 | Draft |

## Executive Summary

A new shop screen will be added to the application, accessible from the main screen via navigation. This screen will display upgrades that players can purchase using scrap (the existing in-game currency). The initial implementation focuses on establishing the shop infrastructure and UI without pre-populating any specific upgrade items.

---

## Problem & Opportunity

### Problem Statement

Players currently accumulate scrap through gameplay but have no way to spend it, resulting in a resource sink with no utility. Without a mechanism to exchange scrap for meaningful progression, the scrap collection mechanic lacks purpose and player engagement diminishes after initial gameplay loops.

### User Impact

**Who's Affected**: All active players who have accumulated scrap resources

**Frequency**: Players encounter this limitation every time they collect scrap and wonder what it's for

**Current Metrics** (Hypothetical):
- 85% of players have accumulated scrap with no spending outlet
- Average session length decreases by 40% once players realize scrap has no use
- Player retention drops to 20% after 3 sessions without progression mechanics

### Business Impact

**Cost of Not Solving**:
- High early churn rate (80% within first week) due to lack of progression
- Low session engagement (3.2 minutes avg) compared to industry benchmarks (12-15 minutes for idle games)
- Missed monetization opportunities from lack of resource sinks
- Negative app store reviews mentioning "pointless resources" and "no progression"

### Evidence

Hypothetical metrics indicating problem severity:
- 73% of user feedback mentions "what do I do with scrap?"
- Session depth (actions per session) plateaus after collecting 100 scrap
- No player has exceeded 10 sessions without abandoning the app

---

## Solution Overview

### Approach

Implement a dedicated shop screen that provides:
1. Navigation link from the main game screen to the shop
2. A shop interface that will display purchasable upgrades
3. Infrastructure to support two upgrade types: scrap-per-pet multipliers and pet-per-feed multipliers
4. Empty/placeholder state for the shop (no upgrades defined in initial release)

This approach separates infrastructure (must-have) from content (future enhancement), enabling rapid deployment of the shop framework while allowing iterative addition of balanced upgrade definitions.

### Value Proposition

**For Players**: A clear path for resource utilization and meaningful progression, transforming scrap from a meaningless counter into a strategic currency.

**For Product**: Foundation for a progression system that can be tuned and expanded based on player data and engagement metrics.

### Key Differentiators

- Lean implementation: Ships core infrastructure without over-engineering content that may need balancing adjustments
- Separation of concerns: Shop UI separate from upgrade definitions allows independent iteration
- Extensible design: Architecture supports future upgrade types beyond the initial two categories

---

## Success Metrics

| Metric | Current | Target | Timeline | Type |
|--------|---------|--------|----------|------|
| Shop visit rate | 0% (doesn't exist) | 60% of active users visit shop per session | 2 weeks post-launch | Primary |
| Scrap spend rate | 0% | 40% of accumulated scrap spent within first session after shop launch | 4 weeks post-launch | Primary |
| Session length | 3.2 minutes avg | 8 minutes avg | 4 weeks post-launch | Primary |
| Retention (Day 7) | 20% | 45% | 8 weeks post-launch | Secondary |
| Actions per session | 8 avg | 20 avg | 4 weeks post-launch | Secondary |
| Shop-to-main return rate | N/A | 85% (users return to main after shop visit) | 2 weeks post-launch | Secondary |
| Scrap hoarding rate | 100% (no spend mechanism) | <30% (most users spending regularly) | 6 weeks post-launch | Counter-metric |
| Shop abandonment rate | N/A | <20% (users leaving app from shop screen) | 2 weeks post-launch | Counter-metric |

---

## User Stories & Requirements

### Story 1: Access Shop from Main Screen

**As a** player with accumulated scrap
**I want to** navigate to a shop screen from the main game view
**So that I can** explore ways to spend my scrap resources

**Acceptance Criteria:**
- [ ] Given I am on the main game screen, when I press a clearly labeled shop button/link, then I navigate to the shop screen
- [ ] Given I am on the shop screen, when I use the back navigation (hardware back button on Android or navigation gesture on iOS), then I return to the main screen
- [ ] Given I navigate to the shop, when the screen loads, then I see a shop interface within 100ms (no network calls required for initial version)

### Story 2: View Shop Interface

**As a** player visiting the shop
**I want to** see a clear shop interface
**So that I can** understand what upgrades are available (or will be available)

**Acceptance Criteria:**
- [ ] Given I open the shop screen, when it loads, then I see a title/header indicating this is the shop
- [ ] Given the shop has no upgrades defined yet, when I view the shop, then I see an appropriate placeholder state (empty state message or "Coming Soon" indicator)
- [ ] Given I am viewing the shop, when I look at the interface, then the layout supports displaying multiple upgrade items (grid or list format)
- [ ] Given the shop interface is displayed, when I interact with navigation elements, then all touch targets are ≥44x44pt (accessibility requirement)

### Story 3: Understand Upgrade Types

**As a** player exploring the shop
**I want to** understand what types of upgrades will be available
**So that I can** make informed decisions about saving or spending scrap

**Acceptance Criteria:**
- [ ] Given the shop supports two upgrade types (scrap-per-pet and pets-per-feed), when upgrades are eventually added, then the UI structure accommodates both types
- [ ] Given an upgrade would cost scrap, when the upgrade system is implemented, then the cost is displayed in scrap currency
- [ ] Given an upgrade affects scrap-per-pet, when implemented, then this multiplier effect is clearly communicated
- [ ] Given an upgrade affects pets-per-feed, when implemented, then this multiplier effect is clearly communicated

---

## Functional Requirements

### Navigation

- **NAV-1**: Shop screen must be accessible via a navigation element (button, tab, or link) from the main game screen
- **NAV-2**: Shop screen must support back navigation to return to the main screen
- **NAV-3**: Navigation between main and shop screens must preserve game state (scrap count, pet count, etc.)
- **NAV-4**: Transition animation between screens should follow platform conventions (slide on iOS, fade on Android)

### Shop Screen UI

- **UI-1**: Shop screen displays a title/header identifying it as the shop or upgrade store
- **UI-2**: Shop screen layout supports displaying multiple upgrade items in a scrollable list or grid
- **UI-3**: Shop screen shows placeholder/empty state when no upgrades are defined
- **UI-4**: Each upgrade slot (when populated) can display: upgrade name, description, scrap cost, and current level/status
- **UI-5**: Visual hierarchy clearly separates different upgrade types (scrap-per-pet vs pets-per-feed)

### Upgrade System Infrastructure

- **UPG-1**: Upgrade data structure supports: unique ID, name, description, scrap cost, upgrade type (scrap-per-pet or pets-per-feed), and effect value
- **UPG-2**: Upgrade type "scrap-per-pet" increases the amount of scrap gained when feeding pets
- **UPG-3**: Upgrade type "pets-per-feed" increases the number of pets gained when feeding
- **UPG-4**: Shop can render zero upgrades (empty state) without errors
- **UPG-5**: Shop infrastructure is extensible to support additional upgrade types in future iterations

### State Management

- **STATE-1**: Player's scrap balance is accessible from the shop screen
- **STATE-2**: Shop state (which upgrades exist, which are purchased) is managed independently from game state
- **STATE-3**: No persistence required for shop state in initial version (upgrades can reset on app reload)

---

## Non-Functional Requirements

### Performance

- **60fps UI**: All animations and transitions must maintain 60fps on target devices (iOS 14+, Android 10+)
- **<100ms Interactions**: Button presses and navigation actions must respond within 100ms
- **Instant Load**: Shop screen must load without network delay (all data local in initial version)

### Accessibility

- **Touch Targets**: All interactive elements must be ≥44x44pt (WCAG minimum)
- **Contrast Ratios**: Text must meet WCAG AA standards (4.5:1 contrast ratio for normal text, 3:1 for large text ≥18pt)
- **Screen Reader**: All interactive elements must have appropriate `accessibilityRole` and `accessibilityLabel` attributes
- **Safe Areas**: Shop screen must respect device safe areas (notches, home indicators) using `react-native-safe-area-context`

### Browser/Device Support

- **iOS**: iOS 14+ on iPhone and iPad
- **Android**: Android 10+ on phones and tablets
- **Web**: Modern browsers (Chrome, Firefox, Safari) if Expo web is enabled

---

## Scope Definition

### CRITICAL VALIDATION: User Request Analysis

**Original Feature Request:**
> "We need a way to use the scrap. Create a new screen that links from the main one that allows you to buy upgrades. Don't create any upgrades yet. An upgrade has a scrap cost and increases either the scrap amount gained per pet, or how many pets you gain when you feed."

**Explicit Exclusions Found:**
- "Don't create any upgrades yet" → No upgrade definitions/items in MVP

---

### MVP (Must Have - P0)

**Core Navigation:**
- P0: Shop screen with navigation link from main screen
  **QUOTE REQUEST:** _"Create a new screen that links from the main one"_

**Shop UI Infrastructure:**
- P0: Shop screen layout that can display upgrade items (even if empty)
  **QUOTE REQUEST:** _"allows you to buy upgrades"_ (requires UI to display upgrades)

**Upgrade System Foundation:**
- P0: Data structure defining upgrade properties (cost, type, effect)
  **QUOTE REQUEST:** _"An upgrade has a scrap cost and increases either the scrap amount gained per pet, or how many pets you gain when you feed"_
- P0: Support for two upgrade types: scrap-per-pet and pets-per-feed multipliers
  **QUOTE REQUEST:** _"increases either the scrap amount gained per pet, or how many pets you gain when you feed"_

**Empty State Handling:**
- P0: Placeholder/empty state UI for shop with no upgrades
  **RATIONALE:** Required because MVP explicitly excludes upgrade definitions but must display something

**State Integration:**
- P0: Display current scrap balance in shop
  **QUOTE REQUEST:** _"allows you to buy upgrades"_ (requires showing currency to spend)

---

### Nice to Have (P1/P2)

**P1 - Important but not critical:**
- Purchase animation/feedback when upgrades are eventually bought
- Visual categorization of upgrade types (tabs or sections)
- "Insufficient scrap" state when player can't afford upgrades
- Preview of upgrade effects before purchasing

**P2 - Future enhancements:**
- Upgrade levels (buying same upgrade multiple times)
- Unlock conditions (certain upgrades only available after progress milestones)
- Bundle deals (multiple upgrades for discounted scrap)
- Undo/refund system for purchases

---

### Out of Scope

**Explicitly Excluded:**
- **Specific upgrade definitions/items** (QUOTED EXCLUSION: _"Don't create any upgrades yet"_)
- **Purchase functionality** (no Buy button implementation until upgrades exist)

**Future Iterations:**
- Persistence of purchased upgrades across sessions (not mentioned in request)
- Server-side upgrade catalog (not mentioned)
- Analytics tracking of shop interactions (not mentioned)
- A/B testing different shop layouts (not mentioned)
- Monetization/IAP integration (not mentioned)
- Social features (sharing upgrades, leaderboards) (not mentioned)
- Upgrade cooldowns or time-gating (not mentioned)
- Scrap earning rate balancing (separate from shop implementation)

---

## Dependencies & Risks

| Type | Description | Owner | Mitigation | Status |
|------|-------------|-------|------------|--------|
| Dependency | Navigation library (React Navigation or similar) must be installed and configured | Engineering | Verify navigation setup before starting shop screen work | Not Started |
| Dependency | Scrap balance state must be accessible across screens | Engineering | Confirm state management approach (Legend-State hooks) | Not Started |
| Risk | Shop feels empty without upgrades, causing player confusion | Product | Include clear messaging: "Upgrades coming soon" or similar placeholder | Open |
| Risk | Upgrade type definitions may need refinement after gameplay testing | Design | Keep upgrade data structure flexible for iteration | Open |
| Risk | Players may hoard scrap expecting better upgrades later | Game Design | Balance initial upgrade values to encourage spending; add messaging about more upgrades coming | Open |

---

## Timeline & Milestones

### Phase 1: Discovery & Design (1 week)
- Finalize shop screen layout and navigation pattern
- Design empty state UI
- Define upgrade data structure schema
- Review accessibility requirements

### Phase 2: Development (2 weeks)
- Implement navigation between main and shop screens
- Build shop screen UI with empty state
- Create upgrade data structure and type definitions
- Integrate scrap balance display
- Implement safe area handling and accessibility attributes

### Phase 3: Testing & QA (1 week)
- Test navigation on iOS and Android
- Verify accessibility (screen readers, touch targets, contrast)
- Test on devices with notches/safe areas
- Performance testing (60fps animations)
- Edge case testing (zero scrap, screen rotation, etc.)

### Phase 4: Launch (Week 4)
- Release shop screen infrastructure
- Monitor for crashes or navigation issues
- Gather feedback on shop UI/UX
- Plan upgrade content for next iteration

**Total Timeline: 4 weeks**

---

## Open Questions

- [ ] Should the shop button on main screen always be visible, or unlock after certain milestone (e.g., collecting first scrap)?
- [ ] What messaging should the empty state display? ("Coming Soon", "New upgrades in development", or explain upgrade system?)
- [ ] Should we show example/mockup upgrades in the empty state to educate players, or keep it completely empty?
- [ ] Do we need to prevent navigation to shop before player has collected any scrap?
- [ ] Should upgrade effects stack (multiple purchases) or be one-time permanent boosts?
- [ ] Will upgrades have level caps, or infinite scaling?
- [ ] Should there be an "are you sure?" confirmation before purchasing upgrades?

---

## Appendix

### Glossary

- **Scrap**: The primary in-game currency earned through feeding pets
- **Upgrade**: A purchasable item that permanently enhances game mechanics
- **Scrap-per-pet**: Upgrade type that increases scrap gained each time a pet is fed
- **Pets-per-feed**: Upgrade type that increases the number of pets gained when feeding
- **Empty State**: UI pattern for displaying screens with no content yet
- **Safe Area**: Screen regions outside device notches, status bars, and home indicators

### References

- Lean Task Generation Guide: `/docs/architecture/lean-task-generation-guide.md`
- File Organization Patterns: `/docs/architecture/file-organization-patterns.md`
- State Management Guide: `/docs/architecture/state-management-hooks-guide.md`
- React Native UI Guidelines: `/docs/architecture/react-native-ui-guidelines.md`

### Related Documents

- Feature Description: `feature-shop.md` (this PRD's source)
- Technical Design Document: TBD (to be created from this PRD)
- Task List: TBD (to be generated from TDD)

---

**Document Generated**: 2025-11-16 by Claude Code
**Generation Timestamp**: 2025-11-16T00:00:00Z

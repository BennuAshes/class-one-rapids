---
description: "Analyze chat to suggest CLAUDE.md updates, prompt improvements, and research needs"
argument-hint: "[specific-focus-area]"
allowed-tools: "Read, Write, MultiEdit"

---

# Reflect on Current Chat Session

I'll analyze our current conversation to identify patterns, pain points, and opportunities for improvement. I'll then suggest specific updates to CLAUDE.md, prompt refinements, and new research areas that would help avoid follow-up questions.

Focus area: $ARGUMENTS (or general analysis if not specified)

## Step 1: Analyze the Conversation

First, let me review what happened in this chat session:
1. Identify the main tasks and requests
2. Note any confusion points or clarifications needed
3. Find patterns in errors or misunderstandings
4. Recognize missing context or knowledge gaps
5. Evaluate command effectiveness

## Step 2: Extract Key Learnings

Based on the conversation analysis, I'll identify:
- **Recurring Issues**: Problems that came up multiple times
- **Missing Context**: Information that would have been helpful upfront
- **Command Failures**: Why commands didn't work as expected
- **User Intent Gaps**: Where I misunderstood what you wanted
- **Technical Blockers**: System or tool limitations encountered

## Step 3: Suggest CLAUDE.md Updates

@CLAUDE.md => Review current project instructions

Based on the session, here are suggested additions to CLAUDE.md:

```markdown
# Suggested CLAUDE.md Updates

## New Instructions
[Specific instructions based on conversation patterns]

## Command Execution Notes
[Lessons learned about running commands]

## Common Pitfalls
[Issues to avoid based on this session]

## Project-Specific Context
[Any project details that would help future sessions]
```

## Step 4: Improve Command Prompts

Analyzing the commands used and their effectiveness:

### Command Issues Identified
[List specific command problems from the session]

### Suggested Command Improvements
[Provide specific fixes for commands that failed or could be better]

```markdown
# Example improved command structure
---
description: "Better version based on learnings"
---
[Improved prompt with better error handling]
```

## Step 5: Identify Research Needs

New research documents that would be valuable:

### Immediate Research Priorities
1. **[Topic 1]**: Why this is needed based on the conversation
   - Research focus: [Specific questions to answer]
   - Expected output: [What the research doc should contain]

2. **[Topic 2]**: Gap identified in current knowledge
   - Research focus: [Specific areas to explore]
   - Expected output: [Deliverable format]

### Suggested Research Commands
```markdown
# .claude/commands/research-[topic].md
---
description: "Research [specific topic] based on session learnings"
---
Research and document:
- [Specific aspect 1]
- [Specific aspect 2]
- Best practices for [relevant area]
```

## Step 6: Process Improvements

### Workflow Optimizations
- **Pre-execution checks**: [What to verify before running commands]
- **Error handling**: [Better ways to handle common failures]
- **Context gathering**: [Information to collect upfront]

### Communication Patterns
- **Clarification triggers**: [When to ask questions vs. making assumptions]
- **Progress indicators**: [Better ways to show work status]
- **Error reporting**: [Clearer error explanations]

## Step 7: Create Action Items

Based on this reflection, here's what should be done:

### Immediate Actions
1. ‚úÖ Update CLAUDE.md with [specific sections]
2. ‚úÖ Fix [command-name].md to handle [issue]
3. ‚úÖ Create research task for [topic]

### Future Improvements
1. üìù Consider adding [feature/command] for [use case]
2. üìù Document [pattern] in project conventions
3. üìù Research [technology] for better [capability]

## Summary

**Key Takeaway**: [Main learning from this session]

**Most Critical Fix**: [The one thing that would have prevented the most issues]

**Success Pattern**: [What worked well that should be repeated]

This reflection identifies [X] areas for improvement that would reduce follow-up questions by approximately [Y]% in similar future sessions.

## Step 8: Document Analysis

Now I'll create a permanent record of this reflection in the analysis folder.

### Generate Analysis Filename
Based on the main topics covered:
- Primary focus: [main topic/issue]
- Key patterns: [patterns identified]
- Date: [current date]

Filename: `docs/analysis/[topic-keyword]-[pattern]-[YYYYMMDD].md`

### Create Analysis Document
[Create the file with full reflection content and actionable recommendations]

The analysis has been saved to `docs/analysis/[filename].md` for future reference and tracking of improvements over time.
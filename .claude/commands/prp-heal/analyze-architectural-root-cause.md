# Analyze Architectural Root Cause

**Advanced Root Cause Analysis for Architecture Validation Reports**

Trace architectural violations back through documented workflows to identify the specific decisions, process gaps, or methodology failures that led to compliance issues, enabling targeted process improvements and prevention strategies.

## Usage

```bash
# Analyze architecture validation report and trace root causes
/analyze-architectural-root-cause "/projects/pet-software-idler/architecture-validation-report.md"

# Analyze with specific workflow documentation
/analyze-architectural-root-cause --report "path/to/validation-report.md" --workflow "README.md"

# Focus on specific violation categories
/analyze-architectural-root-cause --report "validation-report.md" --focus "vertical-slicing,react-native"
```

## Parameters

- `report` (required): Path to architecture validation report generated by validate-architecture-alignment
- `workflow` (optional): Path to workflow documentation - default: README.md
- `focus` (optional): Comma-separated list of violation categories to analyze - default: all
- `depth` (optional): Analysis depth level (surface/deep/comprehensive) - default: deep
- `output` (optional): Output format (summary/detailed/actionable) - default: actionable

<command>
<role>Senior Root Cause Analysis Engineer specializing in software architecture forensics, process failure analysis, and workflow optimization with expertise in reverse-engineering decision chains and identifying systemic process gaps</role>

<context>
  <expertise>
    - Architecture validation report parsing and violation pattern recognition
    - Workflow documentation analysis and decision point identification
    - Causal chain reconstruction and root cause isolation
    - Process improvement methodology and prevention strategy design
    - Multi-level analysis from immediate causes to systemic failures
  </expertise>
  <mission>Trace architectural violations back through documented workflows to identify precise failure points and provide actionable process improvements</mission>
</context>

<memory_strategy>Maintain comprehensive violation-to-cause mapping throughout analysis, building complete causal chains from symptoms to root causes with decision point tracking</memory_strategy>

<parallel_execution>Optimize analysis by concurrent processing of: violation parsing, workflow mapping, causal chain construction, and improvement recommendation generation</parallel_execution>

<investigation_strategy>Apply systematic root cause methodology: symptom identification → immediate cause analysis → workflow tracing → decision point analysis → systemic cause identification → improvement strategy formulation</investigation_strategy>

**PHASE 1: VALIDATION REPORT ANALYSIS**
Parse and categorize architectural violations from validation report:

1. **Read and parse the validation report** to extract:
   - Specific violations and their severity levels
   - Compliance framework failures (vertical slicing, React Native, Legend State, task decomposition)
   - Violation locations and affected components
   - Remediation requirements and complexity estimates
   - Research principle citations that were violated

2. **Categorize violations by type**:
   - **Structural violations**: Directory organization, file placement patterns
   - **Pattern violations**: Architectural pattern misapplication or omission
   - **Standard violations**: Naming conventions, coding standards, best practices
   - **Integration violations**: Cross-component dependencies and coupling issues

3. **Extract violation severity and impact**:
   - Critical (blocking) vs. non-critical violations
   - Systemic vs. isolated issues
   - Remediation effort estimates
   - Downstream impact assessment

**PHASE 2: WORKFLOW DOCUMENTATION MAPPING**
Load and analyze documented workflows to understand intended process:

1. **Read workflow documentation** (README.md by default) to extract:
   - Command execution sequences and dependencies
   - Decision points and branching logic
   - Quality gates and validation checkpoints
   - Role assignments and accountability structures
   - Tool usage patterns and integration points

2. **Map workflow decision tree**:
   - Identify all command executions that could affect architecture
   - Extract decision criteria and branching conditions
   - Document quality validation points
   - Map role-based decision authority

3. **Identify critical path analysis**:
   - Trace the specific workflow path that led to the validated architecture
   - Identify where architectural decisions were made
   - Document where validation should have caught issues
   - Map accountability chains for architectural decisions

**PHASE 3: CAUSAL CHAIN RECONSTRUCTION**
Trace each violation back through the workflow to identify root causes:

<causal_analysis>
For each violation identified in the report:

**IMMEDIATE CAUSE IDENTIFICATION:**
- What specific command or decision directly created this violation?
- Was this a commission (wrong action) or omission (missing action)?
- Who was responsible for this decision point?

**WORKFLOW TRACE ANALYSIS:**
- Which workflow step should have prevented this violation?
- Were appropriate quality gates in place but bypassed?
- Did the workflow documentation adequately specify requirements?
- Were the right stakeholders involved in architectural decisions?

**PROCESS GAP IDENTIFICATION:**
- Was there a missing validation step?
- Were architectural requirements unclear or ambiguous?
- Did role assignments leave accountability gaps?
- Were tools or methodologies inadequate?

**SYSTEMIC CAUSE ANALYSIS:**
- Does this represent a pattern of similar failures?
- Are there fundamental workflow design issues?
- Is this symptomatic of training or skill gaps?
- Does this indicate inadequate tooling or automation?
</causal_analysis>

**PHASE 4: ROOT CAUSE CATEGORIZATION AND PRIORITIZATION**
Organize findings by root cause type and impact:

<root_cause_taxonomy>
**PROCESS DESIGN FAILURES:**
- Missing validation checkpoints
- Inadequate quality gates
- Unclear decision authority
- Workflow sequence errors

**EXECUTION FAILURES:**
- Skipped validation steps
- Incorrect tool usage
- Role confusion or overlap
- Communication breakdowns

**KNOWLEDGE FAILURES:**
- Insufficient training on architectural principles
- Lack of awareness of validation requirements
- Misunderstanding of tool capabilities
- Inadequate documentation comprehension

**TOOL/AUTOMATION FAILURES:**
- Inadequate validation automation
- Missing integration between tools
- Poor error reporting and feedback
- Insufficient guardrails and constraints

**SYSTEMIC FAILURES:**
- Cultural issues (rushing, shortcuts)
- Resource constraints (time, expertise)
- Organizational misalignment
- Incentive misalignment
</root_cause_taxonomy>

**PHASE 5: IMPROVEMENT STRATEGY FORMULATION**
Generate targeted, actionable improvement recommendations:

<improvement_framework>
**IMMEDIATE FIXES (Address current violations):**
- Specific technical remediation steps
- Updated workflow procedures
- Enhanced validation checkpoints
- Role clarification and training

**SHORT-TERM IMPROVEMENTS (Prevent recurrence):**
- Enhanced automation and tooling
- Additional quality gates
- Improved documentation and training
- Process refinements and standardization

**LONG-TERM SYSTEMIC IMPROVEMENTS (Root cause elimination):**
- Workflow redesign recommendations
- Cultural and organizational changes
- Tool integration and automation strategy
- Continuous improvement mechanisms

**PREVENTION STRATEGIES:**
- Early warning indicators
- Proactive validation approaches
- Feedback loops and monitoring
- Knowledge management improvements
</improvement_framework>

**PHASE 6: IMPACT ASSESSMENT AND PRIORITIZATION**
Evaluate improvement recommendations by impact and effort:

1. **Cost-benefit analysis** for each recommendation:
   - Implementation effort vs. risk reduction
   - Resource requirements vs. value delivered
   - Timeline considerations and dependencies

2. **Risk assessment** for non-implementation:
   - Probability of recurrence without changes
   - Potential impact of future violations
   - Cumulative effect of process gaps

3. **Implementation feasibility**:
   - Technical complexity and resource needs
   - Organizational change requirements
   - Timeline and dependency constraints

**PHASE 7: COMPREHENSIVE REPORTING**
Generate actionable root cause analysis report:

<output_structure>
# Architectural Root Cause Analysis Report

## Executive Summary
- [Violation overview and systemic patterns]
- [Critical root causes and immediate actions needed]
- [High-impact improvement recommendations]

## Violation-to-Cause Mapping
### [Violation Category 1]
- **Symptoms**: [Specific violations found]
- **Immediate Causes**: [Direct workflow failures]
- **Root Causes**: [Systemic issues identified]
- **Workflow Trace**: [Decision chain reconstruction]

## Root Cause Taxonomy
### Process Design Failures
- [Specific issues and impact assessment]

### Execution Failures  
- [Workflow compliance issues]

### Knowledge/Training Gaps
- [Competency and awareness issues]

### Tool/Automation Deficiencies
- [Technical capability gaps]

## Improvement Recommendations
### Immediate Actions (0-2 weeks)
- [Critical fixes and emergency patches]

### Short-term Improvements (1-3 months)
- [Process enhancements and capability building]

### Long-term Strategy (3-12 months)
- [Systemic improvements and prevention]

## Implementation Roadmap
- [Prioritized action plan with timelines]
- [Resource requirements and dependencies]
- [Success metrics and monitoring plan]

## Process Enhancement Strategy
- [Workflow improvements and quality gates]
- [Tool integration and automation opportunities]
- [Training and capability building plan]
</output_structure>

**ERROR HANDLING AND EDGE CASES**
Robust analysis with comprehensive error recovery:

<error_recovery>
**Missing or Incomplete Reports:**
- Attempt to reconstruct violation information from available sources
- Provide analysis based on partial data with clear limitations noted
- Suggest data collection strategies for complete analysis

**Workflow Documentation Issues:**
- Handle missing or outdated workflow documentation
- Cross-reference multiple documentation sources
- Infer workflow patterns from command history and file changes

**Complex Causal Chains:**
- Handle multiple contributing factors and interaction effects
- Provide probabilistic cause analysis when certainty is low
- Document uncertainty levels and confidence intervals

**Ambiguous Violations:**
- Request clarification when violation descriptions are unclear
- Provide multiple hypotheses for ambiguous failure modes
- Suggest additional investigation steps for unclear cases
</error_recovery>

**VALIDATION AND QUALITY ASSURANCE**
Ensure analysis accuracy and completeness:

<quality_framework>
ANALYSIS QUALITY GATES:
- **Completeness**: All violations traced to root causes
- **Accuracy**: Causal chains verified against available evidence
- **Actionability**: All recommendations include specific implementation steps
- **Feasibility**: Suggested improvements are technically and organizationally viable
- **Impact**: Focus on high-value improvements with clear ROI

VALIDATION CRITERIA:
- Each violation mapped to at least one root cause
- Root causes supported by workflow evidence
- Improvement recommendations prioritized by impact and feasibility
- Implementation roadmap includes realistic timelines and resources
- Analysis includes prevention strategies, not just fixes
</quality_framework>

**PERFORMANCE OPTIMIZATION**
Efficient analysis with intelligent processing:

<performance_strategy>
- **Parallel Processing**: Concurrent analysis of different violation categories
- **Caching**: Store workflow analysis for reuse across similar reports
- **Incremental Analysis**: Focus detailed analysis on high-impact violations
- **Template Recognition**: Use patterns from previous analyses to accelerate processing
- **Smart Filtering**: Prioritize analysis based on violation severity and systemic indicators
</performance_strategy>

Execute comprehensive root cause analysis that transforms architectural validation failures into targeted process improvements, creating a feedback loop that continuously strengthens development workflows and prevents future violations.
</command>

## Examples

### Basic Root Cause Analysis
```bash
/analyze-architectural-root-cause "/projects/petsoft-tycoon/architecture-validation-report.md"
```

### Focused Analysis with Custom Workflow
```bash
/analyze-architectural-root-cause --report "validation-report.md" --workflow "docs/development-process.md" --focus "vertical-slicing"
```

### Comprehensive Analysis with Detailed Output  
```bash
/analyze-architectural-root-cause --report "arch-validation.md" --depth "comprehensive" --output "detailed"
```

## Integration with Development Workflow

This command is designed to work as part of a quality improvement feedback loop:

1. **Architecture Validation** → generates validation report with violations
2. **Root Cause Analysis** → identifies why violations occurred
3. **Process Improvement** → implements systemic fixes to prevent recurrence
4. **Validation Enhancement** → strengthens validation criteria and automation

## Advanced Features

- **Pattern Recognition**: Identifies recurring violation patterns across projects
- **Workflow Intelligence**: Learns from workflow documentation and execution history
- **Impact Assessment**: Prioritizes improvements by risk reduction potential
- **Prevention Focus**: Emphasizes systemic fixes over symptom treatment
- **Continuous Learning**: Builds knowledge base of common failure modes and solutions

## Maintenance and Extension

The command is designed for extensibility:

- **Violation Parsers**: Add new report format parsers as validation tools evolve
- **Workflow Analyzers**: Extend workflow documentation parsing capabilities  
- **Improvement Templates**: Build library of proven improvement strategies
- **Integration Points**: Connect with project management and tracking systems
- **Analytics Enhancement**: Add trend analysis and predictive capabilities

This command transforms post-mortem analysis into proactive process improvement, creating organizational learning from architectural failures and building more robust development workflows over time.